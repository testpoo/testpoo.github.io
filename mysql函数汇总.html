<!doctype html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>测试铺</title>
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/style.css">
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/xui.css">
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/markdown.css">
    <link rel="shortcut icon" type="image/ico" href="https://testpoo.github.io/themes/img/favicon.ico">
    <style>
      pre>code {
        white-space: pre-line;
      }
    </style>>
  </head>

  <body>
    <div class="sider">
      <div class="categories">
        <div class="title">
          <a href="https://testpoo.github.io">
            <img src="https://testpoo.github.io/themes/img/title.jpg">
            <div class="linkbutton testpoo">测试铺</div>
          </a>
        </div>
        <div class="scrollheight">
          <ul>
            
            <li><a href="https://testpoo.github.io/常用链接.html"><label style="color: #ffba48"></label>&nbsp;常用链接</a></li>
            
            <li><a href="https://testpoo.github.io/mysql笔记.html"><label style="color: #ffba48"></label>&nbsp;mysql</a></li>
            
            <li><a href="https://testpoo.github.io/shell简介.html"><label style="color: #ffba48"></label>&nbsp;linux</a></li>
            
            <li><a href="https://testpoo.github.io/关于我.html"><label style="color: #ffba48"></label>&nbsp;笔记</a></li>
            
            <li><a href="https://testpoo.github.io/python标准异常.html"><label style="color: #ffba48"></label>&nbsp;python</a></li>
            
            <li><a href="https://testpoo.github.io/debian命令apt和dpkg用法.html"><label style="color: #ffba48"></label>&nbsp;debian</a></li>
            
          </ul>
        </div>
        <div class="github"><a href="https://github.com/testpoo" target="_blank" title="GitHub:TestPoo"></a><a href="#" title="微信号：puyaweis"></a><a href="#" title="邮箱：pu_yawei@qq.com"></a><a href="https://testpoo.github.io/rss.xml" target="_blank"></a></div>
      </div>
      <div class="articles">
        <div class="category">分类：mysql</div>
        <div class="scrollheight">
          <ul>
            
            <li><a href="https://testpoo.github.io/mysql函数汇总.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql函数汇总</span><span>2022-04-18&nbsp;&nbsp;共91544个字</span></a></li>
            
            <li><a href="https://testpoo.github.io/mysql的安装.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql的安装</span><span>2020.05.09&nbsp;&nbsp;共17915个字</span></a></li>
            
            <li><a href="https://testpoo.github.io/mysql笔记.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql笔记</span><span>2019-10-11&nbsp;&nbsp;共19364个字</span></a></li>
            
          </ul>
        </div>
        <div class="item-num">总共3项</div>
      </div>
    </div>
    <div class="main">
      <div class="header"><span>mysql函数汇总</span><span>一个80后老人，专注测试领域<br />最后编辑于2022-04-27 15:07:22</span></div>
      <input class="xswitch xonoff" type="checkbox" id="catalog">
      <div class="posts"><div class="toc">
<ul>
<li><a href="#abs">ABS函数： 求绝对值</a></li>
<li><a href="#sqrt">SQRT函数：求二次方根</a></li>
<li><a href="#mod">MOD函数：求余数</a></li>
<li><a href="#ceilceling">CEIL和CELING函数：向上取整</a></li>
<li><a href="#floor">FLOOR函数：向下取整</a></li>
<li><a href="#rand">RAND函数：生成随机数</a></li>
<li><a href="#sign">SIGN函数：返回参数的符号</a></li>
<li><a href="#powpower">POW和POWER函数：求次方</a></li>
<li><a href="#sin">SIN函数：求正弦值</a></li>
<li><a href="#asin">ASIN函数：求反正弦值</a></li>
<li><a href="#cos">COS函数：求余弦值</a></li>
<li><a href="#acos">ACOS函数：求反余弦值</a></li>
<li><a href="#tan">TAN函数：求正切值</a></li>
<li><a href="#atan">ATAN函数：求反正切值</a></li>
<li><a href="#cot">COT函数：求余切值</a></li>
<li><a href="#length">LENGTH函数：获取字符串长度</a></li>
<li><a href="#concat">CONCAT函数：字符串拼接</a></li>
<li><a href="#insert">INSERT函数：替换字符串</a></li>
<li><a href="#lower">LOWER函数：将字母转换成小写</a></li>
<li><a href="#upper">UPPER函数：将字母转换成大写</a></li>
<li><a href="#left">LEFT函数：从左侧截取字符串</a></li>
<li><a href="#right">RIGHT函数：从右侧截取字符串</a></li>
<li><a href="#trim">TRIM函数：删除空格</a></li>
<li><a href="#replace">REPLACE函数：字符串替换</a></li>
<li><a href="#substring">SUBSTRING函数：截取字符串</a></li>
<li><a href="#reverse">REVERSE函数：反转字符串</a></li>
<li><a href="#curdatecurrent_date">CURDATE和CURRENT_DATE函数：获取系统当前日期</a></li>
<li><a href="#curtimecurrent_time">CURTIME和CURRENT_TIME函数：获取系统当前时间</a></li>
<li><a href="#nowsysdate">NOW和SYSDATE函数：获取当前时间日期</a></li>
<li><a href="#unix_timestampunix">UNIX_TIMESTAMP函数：获取UNIX时间戳</a></li>
<li><a href="#from_unixtime">FROM_UNIXTIME函数：时间戳转日期</a></li>
<li><a href="#month">MONTH函数：获取指定日期的月份</a></li>
<li><a href="#monthname">MONTHNAME函数：获取指定日期月份的英文名称</a></li>
<li><a href="#dayname">DAYNAME函数：获取指定日期的星期名称</a></li>
<li><a href="#dayofweek">DAYOFWEEK函数：获取日期对应的周索引</a></li>
<li><a href="#week">WEEK函数：获取指定日期是一年中的第几周</a></li>
<li><a href="#dayofyear">DAYOFYEAR函数：获取指定日期在一年中的位置</a></li>
<li><a href="#dayofmonth">DAYOFMONTH函数：获取指定日期在一个月的位置</a></li>
<li><a href="#year">YEAR函数：获取年份</a></li>
<li><a href="#time_to_sec">TIME_TO_SEC函数：将时间转换为秒值</a></li>
<li><a href="#sec_to_time">SEC_TO_TIME函数：将秒值转换为时间格式</a></li>
<li><a href="#date_addadddate">DATE_ADD和ADDDATE函数：向日期添加指定时间间隔</a></li>
<li><a href="#date_subsubdate">DATE_SUB和SUBDATE函数：日期减法运算</a></li>
<li><a href="#addtime">ADDTIME函数：时间加法运算</a></li>
<li><a href="#subtime">SUBTIME函数：时间减法运算</a></li>
<li><a href="#datediff">DATEDIFF函数：获取两个日期的时间间隔</a></li>
<li><a href="#date_format">DATE_FORMAT函数：格式化指定的日期</a></li>
<li><a href="#weekday">WEEKDAY函数：获取指定日期在一周内的索引位置</a></li>
<li><a href="#max">MAX函数：查询指定列的最大值</a></li>
<li><a href="#min">MIN函数：查询指定列的最小值</a></li>
<li><a href="#count">COUNT函数：统计查询结果的行数</a></li>
<li><a href="#sum">SUM函数：求和</a></li>
<li><a href="#avg">AVG函数：求平均值</a></li>
<li><a href="#if">IF函数：判断</a></li>
<li><a href="#ifnull">IFNULL函数：判断是否为空</a></li>
<li><a href="#case">CASE函数：搜索语句</a></li>
</ul>
</div>
<h3 id="abs">ABS函数： 求绝对值</h3>
<p>绝对值函数 <code>ABS(x)</code> 返回 x 的绝对值。正数的绝对值是其本身，负数的绝对值为其相反数，0 的绝对值是 0。</p>
<p>如：求 5、-2.4、-24 和 0 的绝对值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT ABS(5)</span><span class="nt">,</span><span class="c">ABS(</span><span class="nb">-</span><span class="c">2</span><span class="nt">.</span><span class="c">4)</span><span class="nt">,</span><span class="c">ABS(</span><span class="nb">-</span><span class="c">24)</span><span class="nt">,</span><span class="c">ABS(0);</span>
<span class="nb">+--------+-----------+----------+--------+</span><span class="c"></span>
<span class="c">| ABS(5) | ABS(</span><span class="nb">-</span><span class="c">2</span><span class="nt">.</span><span class="c">4) | ABS(</span><span class="nb">-</span><span class="c">24) | ABS(0) |</span>
<span class="nb">+--------+-----------+----------+--------+</span><span class="c"></span>
<span class="c">|      5 |       2</span><span class="nt">.</span><span class="c">4 |       24 |      0 |</span>
<span class="nb">+--------+-----------+----------+--------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">10 sec)</span>
</code></pre></div>

<p>由运行结果可知，5 的绝对值为 5，-2.4 的绝对值为 2.4，-24 的绝对值为 24，0 的绝对值是 0。</p>
<h3 id="sqrt">SQRT函数：求二次方根</h3>
<p>平方根函数 <code>SQRT(x)</code> 返回非负数 x 的二次方根。负数没有平方根，返回结果为 NULL。</p>
<p>如：求 25、120 和 -9 的二次平方根，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT SQRT(25)</span><span class="nt">,</span><span class="c">SQRT(120)</span><span class="nt">,</span><span class="c">SQRT(</span><span class="nb">-</span><span class="c">9);</span>
<span class="nb">+----------+--------------------+----------+</span><span class="c"></span>
<span class="c">| SQRT(25) | SQRT(120)          | SQRT(</span><span class="nb">-</span><span class="c">9) |</span>
<span class="nb">+----------+--------------------+----------+</span><span class="c"></span>
<span class="c">|        5 | 10</span><span class="nt">.</span><span class="c">954451150103322 |     NULL |</span>
<span class="nb">+----------+--------------------+----------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，5 的平方等于 25，因此 25 的平方根为 5；120 的平方根为 10.954451150103322；而负数没有平方根，因此 -9 返回的结果为 NULL。</p>
<h3 id="mod">MOD函数：求余数</h3>
<p>求余函数 <code>MOD(x,y)</code> 返回 x 被 y 除后的余数，<code>MOD()</code> 对于带有小数部分的数值也起作用，它返回除法运算后的余数。</p>
<p>如：对 <code>MOD(63,8)</code>、<code>MOD(120,10)</code>、<code>MOD(15.5,3)</code> 进行求余运算，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT MOD(63</span><span class="nt">,</span><span class="c">8)</span><span class="nt">,</span><span class="c">MOD(120</span><span class="nt">,</span><span class="c">10)</span><span class="nt">,</span><span class="c">MOD(15</span><span class="nt">.</span><span class="c">5</span><span class="nt">,</span><span class="c">3);</span>
<span class="nb">+-----------+-------------+-------------+</span><span class="c"></span>
<span class="c">| MOD(63</span><span class="nt">,</span><span class="c">8) | MOD(120</span><span class="nt">,</span><span class="c">10) | MOD(15</span><span class="nt">.</span><span class="c">5</span><span class="nt">,</span><span class="c">3) |</span>
<span class="nb">+-----------+-------------+-------------+</span><span class="c"></span>
<span class="c">|         7 |           0 |         0</span><span class="nt">.</span><span class="c">5 |</span>
<span class="nb">+-----------+-------------+-------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，63 除以 8 余数是 7，120 除以 10 余数是 0，15.5 除以 3 余数是 0.5</p>
<h3 id="ceilceling">CEIL和CELING函数：向上取整</h3>
<p>取整函数 <code>CEIL(x)</code> 和 <code>CEILING(x)</code> 的意义相同，返回不小于 x 的最小整数值，返回值转化为一个 BIGINT。</p>
<p>如：使用 <code>CEILING</code> 函数返回最小整数，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT CEIL(</span><span class="nb">-</span><span class="c">2</span><span class="nt">.</span><span class="c">5)</span><span class="nt">,</span><span class="c">CEILING(2</span><span class="nt">.</span><span class="c">5);</span>
<span class="nb">+------------+--------------+</span><span class="c"></span>
<span class="c">| CEIL(</span><span class="nb">-</span><span class="c">2</span><span class="nt">.</span><span class="c">5) | CEILING(2</span><span class="nt">.</span><span class="c">5) |</span>
<span class="nb">+------------+--------------+</span><span class="c"></span>
<span class="c">|         </span><span class="nb">-</span><span class="c">2 |            3 |</span>
<span class="nb">+------------+--------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可知，-2.5 为负数，不小于 -2.5 的最小整数为 -2，因此返回值为 -2；不小于 2.5 的最小整数为 3，因此返回值为 3。</p>
<h3 id="floor">FLOOR函数：向下取整</h3>
<p><code>FLOOR(x)</code> 函数返回小于 x 的最大整数值。</p>
<p>如：求 小于 5，5.66，-4，-4.66 的最大整数</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT FLOOR(5)</span><span class="nt">,</span><span class="c">FLOOR(5</span><span class="nt">.</span><span class="c">66)</span><span class="nt">,</span><span class="c">FLOOR(</span><span class="nb">-</span><span class="c">4)</span><span class="nt">,</span><span class="c">FLOOR(</span><span class="nb">-</span><span class="c">4</span><span class="nt">.</span><span class="c">66);</span>
<span class="nb">+----------+-------------+-----------+--------------+</span><span class="c"></span>
<span class="c">| FLOOR(5) | FLOOR(5</span><span class="nt">.</span><span class="c">66) | FLOOR(</span><span class="nb">-</span><span class="c">4) | FLOOR(</span><span class="nb">-</span><span class="c">4</span><span class="nt">.</span><span class="c">66) |</span>
<span class="nb">+----------+-------------+-----------+--------------+</span><span class="c"></span>
<span class="c">|        5 |           5 |        </span><span class="nb">-</span><span class="c">4 |           </span><span class="nb">-</span><span class="c">5 |</span>
<span class="nb">+----------+-------------+-----------+--------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，小于 5，5.66，-4，-4.66 的最大整数依次是 5，5，-4，-5。</p>
<h3 id="rand">RAND函数：生成随机数</h3>
<p><code>RAND()</code> 函数被调用时，可以产生一个在 0 和 1 之间的随机数。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c">  SELECT RAND()</span><span class="nt">,</span><span class="c"> RAND()</span><span class="nt">,</span><span class="c"> RAND();</span>
<span class="nb">+------------------+-----------------+------------------+</span><span class="c"></span>
<span class="c">| RAND()           | RAND()          | RAND()           |</span>
<span class="nb">+------------------+-----------------+------------------+</span><span class="c"></span>
<span class="c">| 0</span><span class="nt">.</span><span class="c">45464584925645 | 0</span><span class="nt">.</span><span class="c">1824410643265 | 0</span><span class="nt">.</span><span class="c">54826780459682 |</span>
<span class="nb">+------------------+-----------------+------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec) </span>
</code></pre></div>

<p>由运行结果可知，每次调用 <code>RAND()</code> 函数，都会随机生成一个 0~1 之间的随机数 。</p>
<p>当使用整数作为参数调用时，<code>RAND()</code> 使用该值作为随机数的种子发生器。每次种子使用给定值生成，RAND() 将产生一个可重复的系列数字：</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT RAND(1)</span><span class="nt">,</span><span class="c">RAND()</span><span class="nt">,</span><span class="c">RAND(1);</span>
<span class="nb">+---------------------+--------------------+---------------------+</span><span class="c"></span>
<span class="c">| RAND(1)             | RAND()             | RAND(1)             |</span>
<span class="nb">+---------------------+--------------------+---------------------+</span><span class="c"></span>
<span class="c">| 0</span><span class="nt">.</span><span class="c">40540353712197724 | 0</span><span class="nt">.</span><span class="c">7901452330780637 | 0</span><span class="nt">.</span><span class="c">40540353712197724 |</span>
<span class="nb">+---------------------+--------------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，当向 <code>RAND()</code> 函数中传入一个整数作为参数是，RAND() 函数产生的随机数可以重复。</p>
<h3 id="sign">SIGN函数：返回参数的符号</h3>
<p>符号函数 <code>SIGN(x)</code> 返回参数的符号，x 的值为负、零和正时返回结果依次为 -1、0 和 1。</p>
<p>如：使用 <code>SIGN</code> 函数返回参数的符号，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT SIGN(</span><span class="nb">-</span><span class="c">6)</span><span class="nt">,</span><span class="c">SIGN(0)</span><span class="nt">,</span><span class="c">SIGN(34);</span>
<span class="nb">+----------+---------+----------+</span><span class="c"></span>
<span class="c">| SIGN(</span><span class="nb">-</span><span class="c">6) | SIGN(0) | SIGN(34) |</span>
<span class="nb">+----------+---------+----------+</span><span class="c"></span>
<span class="c">|       </span><span class="nb">-</span><span class="c">1 |       0 |        1 |</span>
<span class="nb">+----------+---------+----------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可知，SIGN(-6) 返回 -1，SIGN(0) 返回 0，SIGN(34) 返回 1。</p>
<h3 id="powpower">POW和POWER函数：求次方</h3>
<p><code>POW(x,y)</code> 函数和 <code>POWER(x,y)</code> 函数用于计算 x 的 y 次方。</p>
<p>如：使用 <code>POW(x,y)</code> 和 <code>POWER(x,y)</code> 函数对参数 x 进行 y 次方的求值。输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT POW(5</span><span class="nt">,</span><span class="nb">-</span><span class="c">2)</span><span class="nt">,</span><span class="c">POW(10</span><span class="nt">,</span><span class="c">3)</span><span class="nt">,</span><span class="c">POW(100</span><span class="nt">,</span><span class="c">0)</span><span class="nt">,</span><span class="c">POWER(4</span><span class="nt">,</span><span class="c">3)</span><span class="nt">,</span><span class="c">POWER(6</span><span class="nt">,</span><span class="nb">-</span><span class="c">3);</span>
<span class="nb">+-----------+-----------+------------+------------+----------------------+</span><span class="c"></span>
<span class="c">| POW(5</span><span class="nt">,</span><span class="nb">-</span><span class="c">2) | POW(10</span><span class="nt">,</span><span class="c">3) | POW(100</span><span class="nt">,</span><span class="c">0) | POWER(4</span><span class="nt">,</span><span class="c">3) | POWER(6</span><span class="nt">,</span><span class="nb">-</span><span class="c">3)          |</span>
<span class="nb">+-----------+-----------+------------+------------+----------------------+</span><span class="c"></span>
<span class="c">|      0</span><span class="nt">.</span><span class="c">04 |      1000 |          1 |         64 | 0</span><span class="nt">.</span><span class="c">004629629629629629 |</span>
<span class="nb">+-----------+-----------+------------+------------+----------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可知，POW(5,-2)的值是0.04，POW(10,3)的值是1000，POW(100,0)的值是1，POWER(4,3)的值是64，POWER(6,-3)的值是0.004629629629629629。</p>
<h3 id="sin">SIN函数：求正弦值</h3>
<p>正弦函数 <code>SIN(x)</code> 返回 x 的正弦值，其中 x 为弧度值。</p>
<p>如：使用 SIN 函数计算正弦值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT SIN(1)</span><span class="nt">,</span><span class="c">SIN(0</span><span class="nt">.</span><span class="c">5*PI());</span>
<span class="nb">+--------------------+---------------+</span><span class="c"></span>
<span class="c">| SIN(1)             | SIN(0</span><span class="nt">.</span><span class="c">5*PI()) |</span>
<span class="nb">+--------------------+---------------+</span><span class="c"></span>
<span class="c">| 0</span><span class="nt">.</span><span class="c">8414709848078965 |             1 |</span>
<span class="nb">+--------------------+---------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">15 sec)</span>
</code></pre></div>

<p>注意：PI() 函数返回圆周率（3.141593）</p>
<div class="codehilite"><pre><span></span><code>mysql&gt; select PI();
+----------+
| PI()     |
+----------+
| 3.141593 |
+----------+
1 row in set (0.01 sec)
</code></pre></div>

<h3 id="asin">ASIN函数：求反正弦值</h3>
<p>反正弦函数 <code>ASIN(x)</code> 返回 x 的反正弦值，若 x 不在 -1 到 1 的范围之内，则返回 NULL。</p>
<p>如：使用 ASIN 函数计算反正弦值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT ASIN(0</span><span class="nt">.</span><span class="c">8414709848078965)</span><span class="nt">,</span><span class="c">ASIN(2);</span>
<span class="nb">+--------------------------+---------+</span><span class="c"></span>
<span class="c">| ASIN(0</span><span class="nt">.</span><span class="c">8414709848078965) | ASIN(2) |</span>
<span class="nb">+--------------------------+---------+</span><span class="c"></span>
<span class="c">|                        1 |    NULL |</span>
<span class="nb">+--------------------------+---------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由结果可以看到，函数 ASIN 和 SIN 互为反函数，ASIN(2) 中的参数 2 超出了正弦值的范围，因此返回 NULL。</p>
<h3 id="cos">COS函数：求余弦值</h3>
<p>余弦函数 <code>COS(x)</code> 返回 x 的余弦值，x 为弧度值。</p>
<p>如：使用 COS 函数计算余弦值，输入的 SQL 语句和执行结果如下所示</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT COS(1)</span><span class="nt">,</span><span class="c">COS(0)</span><span class="nt">,</span><span class="c">COS(PI());</span>
<span class="nb">+--------------------+--------+-----------+</span><span class="c"></span>
<span class="c">| COS(1)             | COS(0) | COS(PI()) |</span>
<span class="nb">+--------------------+--------+-----------+</span><span class="c"></span>
<span class="c">| 0</span><span class="nt">.</span><span class="c">5403023058681398 |      1 |        </span><span class="nb">-</span><span class="c">1 |</span>
<span class="nb">+--------------------+--------+-----------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由结果可以看到，COS(0) 的值为 1，COS(PI()) 的值为 -1，COS(1) 的值为 0.5403023058681398。</p>
<h3 id="acos">ACOS函数：求反余弦值</h3>
<p>反余弦函数 <code>ACOS(x)</code> 。x 值的范围必须在 -1 和 1 之间，否则返回 NULL。</p>
<p>如：使用 ACOS 函数计算反余弦值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT ACOS(2)</span><span class="nt">,</span><span class="c">ACOS(1)</span><span class="nt">,</span><span class="c">ACOS(</span><span class="nb">-</span><span class="c">1);</span>
<span class="nb">+---------+---------+-------------------+</span><span class="c"></span>
<span class="c">| ACOS(2) | ACOS(1) | ACOS(</span><span class="nb">-</span><span class="c">1)          |</span>
<span class="nb">+---------+---------+-------------------+</span><span class="c"></span>
<span class="c">|    NULL |       0 | 3</span><span class="nt">.</span><span class="c">141592653589793 |</span>
<span class="nb">+---------+---------+-------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">01 sec)</span>
</code></pre></div>

<p>由结果可以看到，函数 ACOS 和 COS 互为反函数。</p>
<h3 id="tan">TAN函数：求正切值</h3>
<p>正切函数 <code>TAN(x)</code> 返回 x 的正切值，x 为给定的弧度值。</p>
<p>如：使用 TAN 函数计算正切值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT TAN(1)</span><span class="nt">,</span><span class="c">TAN(0);</span>
<span class="nb">+--------------------+--------+</span><span class="c"></span>
<span class="c">| TAN(1)             | TAN(0) |</span>
<span class="nb">+--------------------+--------+</span><span class="c"></span>
<span class="c">| 1</span><span class="nt">.</span><span class="c">5574077246549023 |      0 |</span>
<span class="nb">+--------------------+--------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由运行结果可知，TAN(1) 的值为 1.5574077246549023，TAN(0) 的值为 0。 </p>
<h3 id="atan">ATAN函数：求反正切值</h3>
<p>反正切 <code>ATAN(x)</code> 返回 x 的反正切值，正切为 x 的值。</p>
<p>如：使用 ATAN 函数计算反正切值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT ATAN(1</span><span class="nt">.</span><span class="c">5574077246549023)</span><span class="nt">,</span><span class="c">ATAN(0);</span>
<span class="nb">+--------------------------+---------+</span><span class="c"></span>
<span class="c">| ATAN(1</span><span class="nt">.</span><span class="c">5574077246549023) | ATAN(0) |</span>
<span class="nb">+--------------------------+---------+</span><span class="c"></span>
<span class="c">|                        1 |       0 |</span>
<span class="nb">+--------------------------+---------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">05 sec)</span>
</code></pre></div>

<p>由结果可以看到，函数 ATAN 和 TAN 互为反函数。</p>
<h3 id="cot">COT函数：求余切值</h3>
<p>余切函数 <code>COT(x)</code> 返回 x 的余切值，x 是给定的弧度值。</p>
<p>如：使用 COT 函数计算余切值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT COT(1);</span>
<span class="nb">+--------------------+</span><span class="c"></span>
<span class="c">| COT(1)             |</span>
<span class="nb">+--------------------+</span><span class="c"></span>
<span class="c">| 0</span><span class="nt">.</span><span class="c">6420926159343306 |</span>
<span class="nb">+--------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，COT(1) 的值为 0.6420926159343306。 </p>
<h3 id="length">LENGTH函数：获取字符串长度</h3>
<p><code>LENGTH(str)</code> 函数的返回值为字符串的字节长度，使用 uft8（UNICODE 的一种变长字符编码，又称万国码）编码字符集时，一个汉字是 3 个字节，一个数字或字母是一个字节。</p>
<p>如：使用 LENGTH 函数计算字符串长度，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT LENGTH(&#39;name&#39;)</span><span class="nt">,</span><span class="c">LENGTH(&#39;数据库&#39;);</span>
<span class="nb">+----------------+---------------------+</span><span class="c"></span>
<span class="c">|LENGTH(&#39;name&#39;)  | LENGTH(&#39;数据库&#39;)    |</span>
<span class="nb">+----------------+---------------------+</span><span class="c"></span>
<span class="c">|              4 |                   9 |</span>
<span class="nb">+----------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">04 sec)</span>
</code></pre></div>

<p>由运行结果可以看到，一个汉字是 3 个字节，“数据库”字符串占 9 个字节。英文字符的个数和所占的字节相同，一个字符占 1 个字节。</p>
<h3 id="concat">CONCAT函数：字符串拼接</h3>
<p><code>CONCAT(sl，s2，...)</code> 函数返回结果为连接参数产生的字符串，或许有一个或多个参数。</p>
<p>若有任何一个参数为 NULL，则返回值为 NULL。若所有参数均为非二进制字符串，则结果为非二进制字符串。若自变量中含有任一二进制字符串，则结果为一个二进制字符串。</p>
<p>如：使用 CONCAT 函数连接字符串，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT CONCAT(&#39;MySQL&#39;</span><span class="nt">,</span><span class="c">&#39;5</span><span class="nt">.</span><span class="c">7&#39;)</span><span class="nt">,</span><span class="c">CONCAT(&#39;MySQL&#39;</span><span class="nt">,</span><span class="c">NULL);</span>
<span class="nb">+-----------------------+----------------------+</span><span class="c"></span>
<span class="c">| CONCAT(&#39;MySQL&#39;</span><span class="nt">,</span><span class="c">&#39;5</span><span class="nt">.</span><span class="c">7&#39;) | CONCAT(&#39;MySQL&#39;</span><span class="nt">,</span><span class="c">NULL) |</span>
<span class="nb">+-----------------------+----------------------+</span><span class="c"></span>
<span class="c">| MySQL5</span><span class="nt">.</span><span class="c">7              | NULL                 |</span>
<span class="nb">+-----------------------+----------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由运行结果可知，CONCAT('MySQL'，'5.7') 返回两个字符串连接后的字符串；CONCAT(‘MySQL’，NULL) 中有一个参数为 NULL，因此返回结果为 NULL。</p>
<h3 id="insert">INSERT函数：替换字符串</h3>
<p>替换字符串函数 <code>INSERT(s1，x，len，s2)</code> 返回字符串 s1，子字符串起始于 x 位置，并且用 len 个字符长的字符串代替 s2。</p>
<p>若 x 超过字符串长度，则返回值为原始字符串。假如 len 的长度大于其他字符串的长度，则从位置 x 开始替换。若任何一个参数为 NULL，则返回值为 NULL。</p>
<p>如：使用 INSERT 函数进行字符串替换操作，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT INSERT(&#39;Football&#39;</span><span class="nt">,</span><span class="c">2</span><span class="nt">,</span><span class="c">4</span><span class="nt">,</span><span class="c">&#39;Play&#39;) AS col1</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> INSERT(&#39;Football&#39;</span><span class="nt">,</span><span class="nb">-</span><span class="c">1</span><span class="nt">,</span><span class="c">4</span><span class="nt">,</span><span class="c">&#39;Play&#39;) AS col2</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> INSERT(&#39;Football&#39;</span><span class="nt">,</span><span class="c">3</span><span class="nt">,</span><span class="c">20</span><span class="nt">,</span><span class="c">&#39;Play&#39;) AS col3;</span>
<span class="nb">+----------+----------+--------+</span><span class="c"></span>
<span class="c">| col1     | col2     | col3   |</span>
<span class="nb">+----------+----------+--------+</span><span class="c"></span>
<span class="c">| FPlayall | Football | FoPlay |</span>
<span class="nb">+----------+----------+--------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">04 sec)</span>
</code></pre></div>

<p>由执行结果可知：
第一个函数 <code>INSERT('Football'，2，4，'Play')</code> 将<code>Football</code>从第 2 个字符开始长度为 4 的字符串替换为 Play，结果为<code>FPlayall</code>；
第二个函数 <code>('Football'，-1，4，'Play')</code> 中的起始位置 -1 超出了字符串长度，直接返回原字符串；
第三个函数 <code>INSERT('Football'，3，20，'Play')</code> 替换长度超出了原字符串长度，则从第 3 个字符开始，截取后面所有的字符，并替换为指定字符 <code>Play</code>，结果为<code>FoPlay</code>。</p>
<h3 id="lower">LOWER函数：将字母转换成小写</h3>
<p>字母小写转换函数 <code>LOWER(str)</code> 可以将字符串 str 中的字母字符全部转换成小写。</p>
<p>如：使用 LOWER 函数将字符串中所有的字母字符转换为小写，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT LOWER(&#39;BLUE&#39;)</span><span class="nt">,</span><span class="c">LOWER(&#39;Blue&#39;);</span>
<span class="nb">+---------------+---------------+</span><span class="c"></span>
<span class="c">| LOWER(&#39;BLUE&#39;) | LOWER(&#39;Blue&#39;) |</span>
<span class="nb">+---------------+---------------+</span><span class="c"></span>
<span class="c">| blue          | blue          |</span>
<span class="nb">+---------------+---------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由结果可以看到，原来所有字母为大写的，全部转换为小写，如<code>BLUE</code>，转换之后为<code>blue</code>；大小写字母混合的字符串，小写不变，大写字母转换为小写字母，如<code>Blue</code>，转换之后为<code>bule</code>。</p>
<h3 id="upper">UPPER函数：将字母转换成大写</h3>
<p>字母大写转换函数 <code>UPPER(str)</code> 可以将字符串 str 中的字母字符全部转换成大写。</p>
<p>如：使用 UPPER 函数将字符串中所有的字母字符转换为大写，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT UPPER(&#39;green&#39;)</span><span class="nt">,</span><span class="c">UPPER(&#39;Green&#39;);</span>
<span class="nb">+----------------+----------------+</span><span class="c"></span>
<span class="c">| UPPER(&#39;green&#39;) | UPPER(&#39;Green&#39;) |</span>
<span class="nb">+----------------+----------------+</span><span class="c"></span>
<span class="c">| GREEN          | GREEN          |</span>
<span class="nb">+----------------+----------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由结果可以看到，原来所有字母字符为小写的，全部转换为大写，如<code>green</code>，转换之后为<code>GREEN</code>；大小写字母混合的字符串，大写不变，小写字母转换为大写字母，如<code>Green</code>，转换之后为<code>GREEN</code>。</p>
<h3 id="left">LEFT函数：从左侧截取字符串</h3>
<p><code>LEFT(s，n)</code> 函数返回字符串 s 最左边的 n 个字符。</p>
<p>如：使用 LEFT 函数返回字符串中左边的字符，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code>mysql&gt; SELECT LEFT(&#39;MySQL&#39;,2);
+-----------------+
| LEFT(&#39;MySQL&#39;,2) |
+-----------------+
| My              |
+-----------------+
1 row in set (0.04 sec)
</code></pre></div>

<p>由运行结果可知，返回字符串<code>MySQL</code>左边开始的长度为 2 的子字符串，结果为<code>My</code>。</p>
<h3 id="right">RIGHT函数：从右侧截取字符串</h3>
<p><code>RIGHT(s，n)</code> 函数返回字符串 s 最右边的 n 个字符。</p>
<p>如：使用 RIGHT 函数返回字符串中右边的字符，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code>mysql&gt; SELECT RIGHT(&#39;MySQL&#39;,3);
+------------------+
| RIGHT(&#39;MySQL&#39;,3) |
+------------------+
| SQL              |
+------------------+
1 row in set (0.00 sec)
</code></pre></div>

<p>由执行结果可知，函数返回字符串<code>MySQL</code>右边开始的长度为3的子字符串，结果为<code>SQL</code>。</p>
<h3 id="trim">TRIM函数：删除空格</h3>
<p>删除空格函数 <code>TRIM(s)</code> 删除字符串 s 两侧的空格。</p>
<p>如：<code>SELECT CONCAT('['，TRIM('mobile')，']')</code>；输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT &#39;</span><span class="k">[</span><span class="c">   mobile   </span><span class="k">]</span><span class="c">&#39;</span><span class="nt">,</span><span class="c">CONCAT(&#39;</span><span class="k">[</span><span class="c">&#39;</span><span class="nt">,</span><span class="c">TRIM(&#39;   mobile   &#39;)</span><span class="nt">,</span><span class="c">&#39;</span><span class="k">]</span><span class="c">&#39;);</span>
<span class="nb">+----------------+--------------------------------------+</span><span class="c"></span>
<span class="c">| </span><span class="k">[</span><span class="c">   mobile   </span><span class="k">]</span><span class="c"> | CONCAT(&#39;</span><span class="k">[</span><span class="c">&#39;</span><span class="nt">,</span><span class="c">TRIM(&#39;   mobile   &#39;)</span><span class="nt">,</span><span class="c">&#39;</span><span class="k">]</span><span class="c">&#39;) |</span>
<span class="nb">+----------------+--------------------------------------+</span><span class="c"></span>
<span class="c">| </span><span class="k">[</span><span class="c">   mobile   </span><span class="k">]</span><span class="c"> | </span><span class="k">[</span><span class="c">mobile</span><span class="k">]</span><span class="c">                             |</span>
<span class="nb">+----------------+--------------------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">07 sec)</span>
</code></pre></div>

<p>由执行结果可知，函数执行之后字符串<code>mobile</code>两边的空格被删除，结果为<code>mobile</code>。</p>
<h3 id="replace">REPLACE函数：字符串替换</h3>
<p>替换函数 <code>REPLACE(s，s1，s2)</code> 使用字符串 s2 替换字符串 s 中所有的字符串 s1。</p>
<p>如：使用 REPLACE 函数进行字符串替换操作，输入的 SQL 语句和执行过程如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT REPLACE(&#39;aaa</span><span class="nt">.</span><span class="c">mysql</span><span class="nt">.</span><span class="c">com&#39;</span><span class="nt">,</span><span class="c">&#39;a&#39;</span><span class="nt">,</span><span class="c">&#39;w&#39;);</span>
<span class="nb">+----------------------------------+</span><span class="c"></span>
<span class="c">| REPLACE(&#39;aaa</span><span class="nt">.</span><span class="c">mysql</span><span class="nt">.</span><span class="c">com&#39;</span><span class="nt">,</span><span class="c">&#39;a&#39;</span><span class="nt">,</span><span class="c">&#39;w&#39;) |</span>
<span class="nb">+----------------------------------+</span><span class="c"></span>
<span class="c">| www</span><span class="nt">.</span><span class="c">mysql</span><span class="nt">.</span><span class="c">com                    |</span>
<span class="nb">+----------------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看出，使用 <code>REPLACE('aaa.mysql.com'，'a'，'w')</code> 将<code>“aaa.mysql.com”</code>字符串的“a”字符替换为“w”字符，结果为<code>www.mysql.com</code>。</p>
<h3 id="substring">SUBSTRING函数：截取字符串</h3>
<p>获取子串函数 <code>SUBSTRING(s，n，len)</code> 带有 len 参数的格式，从字符串 s 返回一个长度同 len 字符相同的子字符串，起始于位置 n。</p>
<p>也可能对 n 使用一个负值。假若这样，则子字符串的位置起始于字符串结尾的第 n 个字符，即倒数第 n 个字符，而不是字符串的开头位置。</p>
<p>如：使用 SUBSTRING 函数获取指定位置处的子字符串，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT SUBSTRING(&#39;computer&#39;</span><span class="nt">,</span><span class="c">3) AS col1</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> SUBSTRING(&#39;computer&#39;</span><span class="nt">,</span><span class="c">3</span><span class="nt">,</span><span class="c">4) AS col2</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> SUBSTRING(&#39;computer&#39;</span><span class="nt">,</span><span class="nb">-</span><span class="c">3) AS col3</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> SUBSTRING(&#39;computer&#39;</span><span class="nt">,</span><span class="nb">-</span><span class="c">5</span><span class="nt">,</span><span class="c">3) AS col4;</span>
<span class="nb">+--------+------+------+------+</span><span class="c"></span>
<span class="c">| col1   | col2 | col3 | col4 |</span>
<span class="nb">+--------+------+------+------+</span><span class="c"></span>
<span class="c">| mputer | mput | ter  | put  |</span>
<span class="nb">+--------+------+------+------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p><code>SUBSTRING('computer'，3)</code> 返回从第 3 个位置开始到字符串结尾的子字符串，结果为<code>mputer</code>；</p>
<p><code>SUBSTRING('computer'，3，4)</code> 返回从第 3 个位置开始长度为 4 的子字符串，结果为<code>mput</code>；</p>
<p><code>SUBSTRING(computer，-3)</code> 返回从倒数第 3 个位置到字符串结尾的子字符串，结果为<code>ter</code>；</p>
<p><code>SUBSTRING(computer，-5，3)</code> 返回从倒数第 5 个位置开始长度为 3 的子字符串，结果为<code>put</code>。</p>
<h3 id="reverse">REVERSE函数：反转字符串</h3>
<p>字符串逆序函数 <code>REVERSE(s)</code> 可以将字符串 s 反转，返回的字符串的顺序和 s 字符串的顺序相反。</p>
<p>如：使用 REVERSE 函数反转字符串，输入的 SQL 语句和执行过程如下所示。</p>
<div class="codehilite"><pre><span></span><code>mysql&gt; SELECT REVERSE(&#39;hello&#39;);
+------------------+
| REVERSE(&#39;hello&#39;) |
+------------------+
| olleh            |
+------------------+
1 row in set (0.00 sec)
</code></pre></div>

<p>由运行结果可以看出，字符串<code>hello</code>经过 <code>REVERSE</code> 函数处理之后所有字符顺序被反转，结果为<code>olleh</code>。</p>
<h3 id="curdatecurrent_date">CURDATE和CURRENT_DATE函数：获取系统当前日期</h3>
<p><code>CURDATE()</code> 和 <code>CURRENT_DATE()</code> 函数的作用相同，将当前日期按照<code>YYYY-MM-DD</code>或<code>YYYYMMDD</code>格式的值返回，具体格式根据函数用在字符串或数字语境中而定。</p>
<p>如：使用日期函数 <code>CURDATE</code> 和 <code>CURRENT_DATE</code> 获取系统当前日期，输入的 SQL 语句和执行结果如下所示。</p>
<p>由运行结果可以看到，两个函数的作用相同，返回了相同的系统当前日期，“CURDATE()+0”将当前日期值转换为数值型的。</p>
<h3 id="curtimecurrent_time">CURTIME和CURRENT_TIME函数：获取系统当前时间</h3>
<p><code>CURTIME()</code> 和 <code>CURRENT_TIME()</code> 函数的作用相同，将当前时间以<code>HH:MM:SS</code>或<code>HHMMSS</code>格式返回，具体格式根据函数用在字符串或数字语境中而定。</p>
<p>如：使用时间函数 <code>CURTIME</code> 和 <code>CURRENT_TIME</code> 获取系统当前时间，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT CURDATE()</span><span class="nt">,</span><span class="c">CURRENT_DATE()</span><span class="nt">,</span><span class="c">CURRENT_DATE()</span><span class="nb">+</span><span class="c">0;</span>
<span class="nb">+------------+----------------+------------------+</span><span class="c"></span>
<span class="c">| CURDATE()  | CURRENT_DATE() | CURRENT_DATE()</span><span class="nb">+</span><span class="c">0 |</span>
<span class="nb">+------------+----------------+------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19     |         20220419 |</span>
<span class="nb">+------------+----------------+------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看出，两个函数返回的结果相同，都返回了当前的系统时间。CURRENT_TIME()+0 是将当前日期值转换为数值型的。</p>
<h3 id="nowsysdate">NOW和SYSDATE函数：获取当前时间日期</h3>
<p><code>NOW()</code> 和 <code>SYSDATE()</code> 函数的作用相同，都是返回当前日期和时间值，格式为<code>YYYY-MM-DD HH:MM:SS</code>或<code>YYYYMMDDHHMMSS</code>，具体格式根据函数用在字符串或数字语境中而定。</p>
<p>如：使用日期时间函数 <code>NOW</code> 和 <code>SYSDATE</code> 获取当前系统的日期和时间，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT NOW()</span><span class="nt">,</span><span class="c">SYSDATE();</span>
<span class="nb">+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| NOW()               | SYSDATE()           |</span>
<span class="nb">+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:47:53 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:47:53 |</span>
<span class="nb">+---------------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看到，<code>NOW</code> 函数和 <code>SYSDATE</code> 函数返回的结果是相同的。</p>
<p>虽然 <code>NOW()</code> 和 <code>SYSDATE()</code> 都表示当前时间，但是 <code>NOW()</code> 取的是语句开始执行的时间，而 <code>SYSDATE()</code> 取的是语句执行过程中动态的实时时间。</p>
<p>如：先查询了 NOW() 和 SYSDATE()，然后 sleep 了 3 秒，再查询 NOW() 和 SYSDATE()，结果如下：</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> select now()</span><span class="nt">,</span><span class="c">sysdate()</span><span class="nt">,</span><span class="c">sleep(3)</span><span class="nt">,</span><span class="c">now()</span><span class="nt">,</span><span class="c">sysdate();</span>
<span class="nb">+---------------------+---------------------+----------+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| now()               | sysdate()           | sleep(3) | now()               | sysdate()           |</span>
<span class="nb">+---------------------+---------------------+----------+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:48:05 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:48:05 |        0 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:48:05 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:48:08 |</span>
<span class="nb">+---------------------+---------------------+----------+---------------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (3</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看出，<code>NOW()</code> 函数始终获取的是 SQL 语句开始执行的时间，而 <code>SYSDATE()</code> 函数则是动态获取的实时时间。</p>
<h3 id="unix_timestampunix">UNIX_TIMESTAMP函数：获取UNIX时间戳</h3>
<p><code>UNIX_TIMESTAMP(date)</code> 若无参数调用，返回一个无符号整数类型的 UNIX 时间戳（'1970-01-01 00:00:00'GMT之后的秒数）。</p>
<p>若用 date 来调用 <code>UNIX_TIMESTAMP()</code>，它会将参数值以'1970-01-01 00:00:00'GMT后的秒数的形式返回。</p>
<p>如：使用 <code>UNIX_TIMESTAMP()</code> 函数返回 UNIX 格式的时间戳，输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT UNIX_TIMESTAMP()</span><span class="nt">,</span><span class="c">UNIX_TIMESTAMP(NOW())</span><span class="nt">,</span><span class="c">NOW();</span>
<span class="nb">+------------------+-----------------------+---------------------+</span><span class="c"></span>
<span class="c">| UNIX_TIMESTAMP() | UNIX_TIMESTAMP(NOW()) | NOW()               |</span>
<span class="nb">+------------------+-----------------------+---------------------+</span><span class="c"></span>
<span class="c">|       1650347304 |            1650347304 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:48:24 |</span>
<span class="nb">+------------------+-----------------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<h3 id="from_unixtime">FROM_UNIXTIME函数：时间戳转日期</h3>
<p><code>FROM_UNIXTIME(date)</code> 函数把 UNIX 时间戳转换为普通格式的日期时间值，与 <code>UNIX_TIMESTAMP ()</code> 函数互为反函数。</p>
<p>如：使用 <code>FROM_UNIXTIME(date)</code> 函数将 UNIX 时间戳转换为普通格式时间。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> select FROM_UNIXTIME(1650347304);</span>
<span class="nb">+---------------------------+</span><span class="c"></span>
<span class="c">| FROM_UNIXTIME(1650347304) |</span>
<span class="nb">+---------------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 13:48:24       |</span>
<span class="nb">+---------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)0 sec)</span>
</code></pre></div>

<h3 id="month">MONTH函数：获取指定日期的月份</h3>
<p><code>MONTH(date)</code> 函数返回指定 date 对应的月份，范围为 1～12。</p>
<p>如：使用 MONTH() 函数返回指定日期中的月份，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT MONTH(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+---------------------+</span><span class="c"></span>
<span class="c">| MONTH(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+---------------------+</span><span class="c"></span>
<span class="c">|                   4 |</span>
<span class="nb">+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">03 sec)</span>
</code></pre></div>

<p>由运行结果可知，2022-04-19 对应的月份是 4。</p>
<h3 id="monthname">MONTHNAME函数：获取指定日期月份的英文名称</h3>
<p><code>MONTHNAME(date)</code> 函数返回日期 date 对应月份的英文全名。</p>
<p>如：使用 <code>MONTHNAME()</code> 函数返回指定日期中月份的名称，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT MONTHNAME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">| MONTHNAME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">| April                   |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，2022-04-19 对应月份的英文全名是  April。</p>
<h3 id="dayname">DAYNAME函数：获取指定日期的星期名称</h3>
<p><code>DAYNAME(date)</code> 函数返回 date 对应的工作日英文名称，例如 Sunday、Monday 等。</p>
<p>如：使用 <code>DAYNAME(date)</code> 函数返回指定日期的工作日名称。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DAYNAME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+-----------------------+</span><span class="c"></span>
<span class="c">| DAYNAME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+-----------------------+</span><span class="c"></span>
<span class="c">| Tuesday               |</span>
<span class="nb">+-----------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，2022-04-19 这一天是星期二，英文名称是 Tuesday。</p>
<h3 id="dayofweek">DAYOFWEEK函数：获取日期对应的周索引</h3>
<p><code>DAYOFWEEK(d)</code> 函数返回 d 对应的一周中的索引（位置）。1 表示周日，2 表示周一，……，7 表示周六。这些索引值对应于ODBC标准。</p>
<p>如：使用 <code>DAYOFWEEK()</code> 函数返回日期对应的周索引，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DAYOFWEEK(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">| DAYOFWEEK(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">|                       3 |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，2022 年 4 月 19 日为周二，因此返回其对应的索引值为 3。</p>
<h3 id="week">WEEK函数：获取指定日期是一年中的第几周</h3>
<p>WEEK() 函数计算日期 date 是一年中的第几周。<code>WEEK(date,mode)</code> 函数允许指定星期是否起始于周日或周一，以及返回值的范围是否为 0～52 或 1～53。</p>
<p>WEEK函数接受两个参数：
<code>date</code>是要获取周数的日期。
<code>mode</code>是一个可选参数，用于确定周数计算的逻辑。</p>
<p>如果忽略 mode 参数，默认情况下 WEEK 函数将使用 <code>default_week_format</code> 系统变量的值。要获取 <code>default_week_format</code> 变量的当前值，请使用 <code>SHOW VARIABLES</code> 语句如下：</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SHOW VARIABLES LIKE &#39;default_week_format&#39;;</span>
<span class="nb">+---------------------+-------+</span><span class="c"></span>
<span class="c">| Variable_name       | Value |</span>
<span class="nb">+---------------------+-------+</span><span class="c"></span>
<span class="c">| default_week_format | 0     |</span>
<span class="nb">+---------------------+-------+</span><span class="c"></span>
<span class="c">1 row in set</span><span class="nt">,</span><span class="c"> 1 warning (0</span><span class="nt">.</span><span class="c">02 sec)</span>
</code></pre></div>

<p>如：使用 <code>WEEK(date)</code> 函数查询指定日期是一年中的第几周。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT WEEK(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;</span><span class="nt">,</span><span class="c">1);</span>
<span class="nb">+----------------------+</span><span class="c"></span>
<span class="c">| WEEK(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;</span><span class="nt">,</span><span class="c">1) |</span>
<span class="nb">+----------------------+</span><span class="c"></span>
<span class="c">|                   16 |</span>
<span class="nb">+----------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可知，2022-04-19 是一年中的第 16 周。</p>
<h3 id="dayofyear">DAYOFYEAR函数：获取指定日期在一年中的位置</h3>
<p><code>DAYOFYEAR(d)</code> 函数返回 d 是一年中的第几天，范围为 1～366。</p>
<p>如：使用 <code>DAYOFYEAR()</code> 函数返回指定日期在一年中的位置，输入的 SQL 语句和执行过程如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DAYOFYEAR(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">| DAYOFYEAR(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">|                     109 |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看出，1、3月份各31天，2月份各28天，再加上4月份19天，因此返回结果为109。</p>
<h3 id="dayofmonth">DAYOFMONTH函数：获取指定日期在一个月的位置</h3>
<p><code>DAYOFMONTH(d)</code> 函数返回 d 是一个月中的第几天，范围为 1～31。</p>
<p>如：使用 <code>DAYOFMONTH()</code> 函数返回指定日期在一个月中的位置，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DAYOFMONTH(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+--------------------------+</span><span class="c"></span>
<span class="c">| DAYOFMONTH(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+--------------------------+</span><span class="c"></span>
<span class="c">|                       19 |</span>
<span class="nb">+--------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看出，2022-04-19 是这个月的第 19 天。</p>
<h3 id="year">YEAR函数：获取年份</h3>
<p><code>YEAR()</code> 函数可以从指定日期值中来获取年份值。</p>
<p><code>YEAR()</code> 函数需要接受 date 参数，并返回日期的年份。语法格式如下：<code>YEAR(date)</code>;</p>
<p><code>YEAR()</code> 函数返回的年份值范围为 1000 到 9999，如果日期为零，<code>YEAR()</code> 函数返回 0。</p>
<p>如：使用 <code>YEAR()</code> 函数获取当前时间的年份，输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code>mysql&gt; SELECT YEAR(NOW());
+-------------+
| YEAR(NOW()) |
+-------------+
|        2022 |
+-------------+
1 row in set (0.00 sec)
</code></pre></div>

<h3 id="time_to_sec">TIME_TO_SEC函数：将时间转换为秒值</h3>
<p><code>TIME_TO_SEC(time)</code> 函数返回将参数 time 转换为秒数的时间值，转换公式为“小时 ×3600+ 分钟 ×60+ 秒”。</p>
<p>如：使用 <code>TIME_TO_SEC(time)</code> 函数将时间值转换为秒值。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT TIME_TO_SEC(&#39;13:13:13&#39;);</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">| TIME_TO_SEC(&#39;13:13:13&#39;) |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">|                   47593 |</span>
<span class="nb">+-------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，根据计算公式“13×3600+13×60+13”得出结果秒数 47593。</p>
<h3 id="sec_to_time">SEC_TO_TIME函数：将秒值转换为时间格式</h3>
<p><code>SEC_TO_TIME(seconds)</code> 函数返回将参数 seconds 转换为小时、分钟和秒数的时间值。</p>
<p>如：使用 <code>SEC_TO_TIME(seconds)</code> 函数将秒值转换为时间格式，输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT SEC_TO_TIME(&#39;47593&#39;);</span>
<span class="nb">+----------------------+</span><span class="c"></span>
<span class="c">| SEC_TO_TIME(&#39;47593&#39;) |</span>
<span class="nb">+----------------------+</span><span class="c"></span>
<span class="c">| 13:13:13</span><span class="nt">.</span><span class="c">000000      |</span>
<span class="nb">+----------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">01 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，将上例中得到的秒数 47593 通过 <code>SEC_TO_TIME(seconds)</code> 函数计算，返回结果是时间值 <code>13:13:13.000000</code>，为字符串型。</p>
<h3 id="date_addadddate">DATE_ADD和ADDDATE函数：向日期添加指定时间间隔</h3>
<p><code>DATE_ADD(date,INTERVAL expr type)</code> 和 <code>ADDDATE(date,INTERVAL expr type)</code> 两个函数的作用相同，都是用于执行日期的加运算。</p>
<p><code>DATE_ADD()</code> 和 <code>ADDDATE()</code> 函数有两个参数：
<code>date</code> 是 <code>DATE</code> 或 <code>DATETIME</code> 的起始值。
<code>INTERVAL expr type</code>是要添加到起始日期值的间隔值。</p>
<p>如：使用 <code>DATE_ADD(date,INTERVAL expr type)</code> 函数执行日期的加运算。输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DATE_ADD(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">INTERVAL 1 SECOND) AS C1</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> DATE_ADD(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">INTERVAL &#39;1:1&#39; MINUTE_SECOND) AS C2</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> ADDDATE(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">INTERVAL 1 SECOND) AS C3;</span>
<span class="nb">+---------------------+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| C1                  | C2                  | C3                  |</span>
<span class="nb">+---------------------+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">20 00:00:00 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">20 00:01:00 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">20 00:00:00 |</span>
<span class="nb">+---------------------+---------------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，<code>DATE_ADD(date,INTERVAL expr type)</code> 和 <code>ADDDATE(date,INTERVAL expr type)</code> 函数的功能完全相同，在原始时间 <code>2022-04-19 23:59:59</code> 上加 1 秒之后结果都是 <code>2022-04-19 23:59:59</code> ；在原始时间上加 1 分钟 1 秒的写法是表达式 '1:1'，最终可得结果 <code>2022-04-20 00:01:00</code>。</p>
<p>如：使用 <code>ADDDATE()</code> 函数执行日期的加操作，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT ADDDATE(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c"> INTERVAL 1 SECOND) AS col1</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> ADDDATE(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39; </span><span class="nt">,</span><span class="c">INTERVAL &#39;1:1&#39; MINUTE_SECOND) AS col2;</span>
<span class="nb">+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| col1                | col2                |</span>
<span class="nb">+---------------------+---------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">20 00:00:00 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">20 00:01:00 |</span>
<span class="nb">+---------------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看到，<code>ADDDATE('2022-04-19 23:59:59', INTERVAL 1 SECOND)</code> 函数执行的结果将时间增加 1 秒后返回，结果为<code>2022-04-20 00:00:00</code>；<code>ADDDATE('2022-04-19 23:59:59' ,INTERVAL '1:1' MINUTE_SECOND)</code> 函数的日期运算类型是 <code>MINUTE_SECOND</code>，将指定时间增加 1 分 1 秒后返回，结果为<code>2022-04-20 00:01:00</code>。</p>
<h3 id="date_subsubdate">DATE_SUB和SUBDATE函数：日期减法运算</h3>
<p><code>DATE_SUB(date,INTERVAL expr type)</code> 和 <code>SUBDATE(date,INTERVAL expr type)</code> 两个函数作用相同，都是执行日期的减法运算。</p>
<p><code>DATE_SUB()</code> 和 <code>SUBDATE()</code> 函数接受两个参数：
<code>date</code> 是 <code>DATE</code> 或 <code>DATETIME</code> 的起始值。
<code>expr</code> 是一个字符串，用于确定从起始日期减去的间隔值。type 是 expr 可解析的间隔单位，例如 DAY，HOUR 等</p>
<p>如：使用 <code>DATE_SUB(date,INTERVAL expr type)</code> 和 <code>SUBDATE(date,INTERVAL expr type)</code> 函数执行日期的减运算，输入 SQL 语句与执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DATE_SUB(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;</span><span class="nt">,</span><span class="c">INTERVAL 31 DAY) AS C1</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> SUBDATE(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;</span><span class="nt">,</span><span class="c">INTERVAL 31 DAY) AS C2</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> DATE_SUB(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 00:01:00&#39;</span><span class="nt">,</span><span class="c">INTERVAL &#39;0 0:1:1&#39; DAY_SECOND) AS C3;</span>
<span class="nb">+------------+------------+---------------------+</span><span class="c"></span>
<span class="c">| C1         | C2         | C3                  |</span>
<span class="nb">+------------+------------+---------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">03</span><span class="nb">-</span><span class="c">19 | 2022</span><span class="nb">-</span><span class="c">03</span><span class="nb">-</span><span class="c">19 | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">18 23:59:59 |</span>
<span class="nb">+------------+------------+---------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，<code>DATE_SUB(date,INTERVAL expr type)</code> 和<code>SUBDATE (date,INTERVAL expr type)</code> 函数的功能完全相同。
注意：<code>DATE_ADD(date,INTERVAL expr type)</code> 和 <code>DATE_SUB(date,INTERVAL expr type)</code> 函数在指定加减的时间段时也可以指定负值，加法的负值即返回原始时间之前的日期和时间，减法的负值即返回原始时间之后的日期和时间。</p>
<h3 id="addtime">ADDTIME函数：时间加法运算</h3>
<p><code>ADDTIME(time,expr)</code> 函数用于执行时间的加法运算。添加 expr 到 time 并返回结果。</p>
<p>其中：time 是一个时间或日期时间表达式，expr 是一个时间表达式。</p>
<p>如：使用 <code>ADDTIME()</code> 函数进行时间的加法运算，输入 SQL 语句和返回结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT ADDTIME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">&#39;0:1:1&#39;)</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> ADDTIME(&#39;10:30:59&#39;</span><span class="nt">,</span><span class="c">&#39;5:10:37&#39;);</span>
<span class="nb">+----------------------------------------+-------------------------------+</span><span class="c"></span>
<span class="c">| ADDTIME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">&#39;0:1:1&#39;) | ADDTIME(&#39;10:30:59&#39;</span><span class="nt">,</span><span class="c">&#39;5:10:37&#39;) |</span>
<span class="nb">+----------------------------------------+-------------------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">20 00:01:00                    | 15:41:36                      |</span>
<span class="nb">+----------------------------------------+-------------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，在原始日期时间 <code>2022-04-19 23:59:59</code> 上加 0 小时 1 分 1 秒之后返回的日期时间是 <code>2022-04-20 00:01:00</code>；在原始时间 <code>10:30:59</code> 上加 5 小时 10 分 37 秒之后返回的日期时间是 <code>15:41:36</code>。</p>
<h3 id="subtime">SUBTIME函数：时间减法运算</h3>
<p><code>SUBTIME(time,expr)</code> 函数用于执行时间的减法运算。</p>
<p>其中：函数返回 time。expr 表示的值和格式 time 相同。time 是一个时间或日期时间表达式， expr 是一个时间。</p>
<p>如：使用 <code>SUBTIME(time,expr)</code> 函数进行时间的减法运算，输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT SUBTIME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">&#39;0:1:1&#39;)</span><span class="nt">,</span><span class="c">SUBTIME(&#39;10:30:59&#39;</span><span class="nt">,</span><span class="c">&#39;5:12:37&#39;);</span>
<span class="nb">+----------------------------------------+-------------------------------+</span><span class="c"></span>
<span class="c">| SUBTIME(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:59:59&#39;</span><span class="nt">,</span><span class="c">&#39;0:1:1&#39;) | SUBTIME(&#39;10:30:59&#39;</span><span class="nt">,</span><span class="c">&#39;5:12:37&#39;) |</span>
<span class="nb">+----------------------------------------+-------------------------------+</span><span class="c"></span>
<span class="c">| 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 23:58:58                    | 05:18:22                      |</span>
<span class="nb">+----------------------------------------+-------------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，在原始日期时间 <code>2022-04-19 23:59:59</code> 上减去 0 小时 1 分 1 秒之后返回的日期时间是 <code>2022-04-19 23:58:58</code>；在原始时间 <code>10:30:59</code> 上减去 5 小时 12 分 37 秒之后返回的日期时间是 <code>05:18:22</code>。</p>
<h3 id="datediff">DATEDIFF函数：获取两个日期的时间间隔</h3>
<p><code>DATEDIFF(date1，date2)</code> 返回起始时间 date1 和结束时间 date2 之间的天数。date1 和 date2 为日期或 <code>date-and-time</code> 表达式。计算时只用到这些值的日期部分。</p>
<p>如：使用 <code>DATEDIFF()</code> 函数计算两个日期之间的间隔天数，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">DATEDIFF</span><span class="p">(</span><span class="s">&#39;2022-04-19&#39;</span><span class="p">,</span><span class="s">&#39;2022-04-18&#39;</span><span class="p">)</span> <span class="kr">AS</span> <span class="n">COL1</span><span class="p">,</span>
    <span class="o">-&gt;</span> <span class="n">DATEDIFF</span><span class="p">(</span><span class="s">&#39;2022-04-19&#39;</span><span class="p">,</span><span class="s">&#39;2022-05-04&#39;</span><span class="p">)</span> <span class="kr">AS</span> <span class="n">col2</span><span class="p">;</span>
<span class="o">+------+------+</span>
<span class="o">|</span> <span class="n">COL1</span> <span class="o">|</span> <span class="n">col2</span> <span class="o">|</span>
<span class="o">+------+------+</span>
<span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>  <span class="o">-</span><span class="mi">15</span> <span class="o">|</span>
<span class="o">+------+------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>由运行结果可知，DATEDIFF() 函数返回 date1-date2 后的值，因此 <code>DATEDIFF('2022-04-19','2022-04-18')</code> 的返回值为 1，<code>DATEDIFF('2022-04-19','2022-05-04')</code> 的返回值为 -15。</p>
<h3 id="date_format">DATE_FORMAT函数：格式化指定的日期</h3>
<p><code>DATE_FORMAT(date，format)</code> 函数是根据 format 指定的格式显示 date 值。</p>
<p><code>DATE_FORMAT()</code> 函数接受两个参数：
<code>date</code>：是要格式化的有效日期值
<code>format</code>：是由预定义的说明符组成的格式字符串，每个说明符前面都有一个百分比字符(%)。</p>
<p>主要的 format 格式如下表所示。</p>
<table>
<thead>
<tr>
<th align="center">说明符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">%a</td>
<td align="center">工作日的缩写名称（Sun~Sat)</td>
</tr>
<tr>
<td align="center">%b</td>
<td align="center">月份的缩写名称（Jan…Dec)</td>
</tr>
<tr>
<td align="center">%c</td>
<td align="center">月份，数字形式（0~12)</td>
</tr>
<tr>
<td align="center">%D</td>
<td align="center">带有英语后缀的该月日期(0th, 2st, 3nd,…）</td>
</tr>
<tr>
<td align="center">%d</td>
<td align="center">该月日期，数字形式（00~31)</td>
</tr>
<tr>
<td align="center">%e</td>
<td align="center">该月日期，数字形式（(0~31)</td>
</tr>
<tr>
<td align="center">%f</td>
<td align="center">微秒（000000 …999999)</td>
</tr>
<tr>
<td align="center">%H</td>
<td align="center">以 2 位数表示 24 小时（00~23)</td>
</tr>
<tr>
<td align="center">%h, %I</td>
<td align="center">以 2 位数表示 12 小时（01~12)</td>
</tr>
<tr>
<td align="center">%i</td>
<td align="center">分钟，数字形式(00~59)</td>
</tr>
<tr>
<td align="center">%j</td>
<td align="center">—年中的天数（001~366)</td>
</tr>
<tr>
<td align="center">%k</td>
<td align="center">以 24 小时（0~23)表示</td>
</tr>
<tr>
<td align="center">%l</td>
<td align="center">以12小时（1~12)表示</td>
</tr>
<tr>
<td align="center">%M</td>
<td align="center">月份名称（January~December)</td>
</tr>
<tr>
<td align="center">%m</td>
<td align="center">月份，数字形式（00~12)</td>
</tr>
<tr>
<td align="center">%p</td>
<td align="center">上午（AM) 或下午（PM)</td>
</tr>
<tr>
<td align="center">%r</td>
<td align="center">时间，12小时制（小时 (hh): 分钟 (mm) : 秒数 (ss) 后加 AM 或 PM)</td>
</tr>
<tr>
<td align="center">%S, %s</td>
<td align="center">以 2 位数形式表示秒（00~59)</td>
</tr>
<tr>
<td align="center">%T</td>
<td align="center">时间，24 小时制（小时 (hh): 分钟 (mm): 秒数 (ss))</td>
</tr>
<tr>
<td align="center">%U</td>
<td align="center">周（00~53)，其中周日为每周的第一天</td>
</tr>
<tr>
<td align="center">%u</td>
<td align="center">周（00~53)，其中周一为每周的第一天</td>
</tr>
<tr>
<td align="center">%V</td>
<td align="center">周（01~53)，其中周日为每周的第一天，和％X同时使用</td>
</tr>
<tr>
<td align="center">%v</td>
<td align="center">周（01~53)，其中周一为每周的第一天，和%x同时使用</td>
</tr>
<tr>
<td align="center">%W</td>
<td align="center">星期标识（周日、周一、周二…周六）</td>
</tr>
<tr>
<td align="center">%w</td>
<td align="center">—周中的每日（0= 周日…6= 周六）</td>
</tr>
<tr>
<td align="center">%X</td>
<td align="center">该周的年份，其中周日为每周的第一天，数字形式，4 位数，和％V同时使用</td>
</tr>
<tr>
<td align="center">%x</td>
<td align="center">该周的年份，其中周一为每周的第一天，数字形式，4位数，和%v同时使用</td>
</tr>
<tr>
<td align="center">%Y</td>
<td align="center">4 位数形式表示年份</td>
</tr>
<tr>
<td align="center">%y</td>
<td align="center">2 位数形式表示年份</td>
</tr>
<tr>
<td align="center">%%</td>
<td align="center">%一个文字字符</td>
</tr>
</tbody>
</table>
<p>如：使用 <code>DATE_FORMAT()</code> 函数格式化输出日期和时间值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT DATE_FORMAT(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 14:16:00&#39;</span><span class="nt">,</span><span class="c">&#39;%W %M %D %Y&#39;) AS col1</span><span class="nt">,</span><span class="c"></span>
<span class="c">    </span><span class="nb">-</span><span class="nv">&gt;</span><span class="c"> DATE_FORMAT(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 14:16:00&#39;</span><span class="nt">,</span><span class="c">&#39;%h:i% %p %M %D %Y&#39;) AS col2;</span>
<span class="nb">+-------------------------+-------------------------+</span><span class="c"></span>
<span class="c">| col1                    | col2                    |</span>
<span class="nb">+-------------------------+-------------------------+</span><span class="c"></span>
<span class="c">| Tuesday April 19th 2022 | 02:i PM April 19th 2022 |</span>
<span class="nb">+-------------------------+-------------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看到，<code>2022-04-19 14:16:00</code> 分别按照不同的参数已转换为不同格式的日期值和时间值。</p>
<h3 id="weekday">WEEKDAY函数：获取指定日期在一周内的索引位置</h3>
<p><code>WEEKDAY(d)</code> 返回 d 对应的工作日索引。0 表示周一，1 表示周二，……，6 表示周日。</p>
<p>如：使用 <code>WEEKDAY()</code> 函数返回日期对应的工作日索引，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT WEEKDAY(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;);</span>
<span class="nb">+-----------------------+</span><span class="c"></span>
<span class="c">| WEEKDAY(&#39;2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19&#39;) |</span>
<span class="nb">+-----------------------+</span><span class="c"></span>
<span class="c">|                     1 |</span>
<span class="nb">+-----------------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由运行结果可以看出，<code>WEEKDAY()</code> 和 <code>DAYOFWEEK()</code> 函数都是返回指定日期在某一周内的位置，只是索引编号不同。</p>
<h3 id="max">MAX函数：查询指定列的最大值</h3>
<p><code>MAX()</code> 函数是用来返回指定列中的最大值。</p>
<p>为了方便理解，首先创建一个学生成绩表 tb_students_score，学生成绩表的数据内容如下所示。</p>
<div class="codehilite"><pre><span></span><code>mysql&gt; use test_db;
Database changed
mysql&gt; SELECT * FROM tb_students_score;
+--------------+---------------+
| student_name | student_score |
+--------------+---------------+
| Dany         |            90 |
| Green        |            99 |
| Henry        |            95 |
| Jane         |            98 |
| Jim          |            88 |
| John         |            94 |
| Lily         |           100 |
| Susan        |            96 |
| Thomas       |            93 |
| Tom          |            89 |
+--------------+---------------+
10 rows in set (0.13 sec)
</code></pre></div>

<p>如：在 tb_students_score 表中查找最高的成绩，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="nf">MAX</span><span class="p">(</span><span class="n">student_score</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kr">AS</span> <span class="n">max_score</span>
    <span class="o">-&gt;</span> <span class="n">FROM</span> <span class="n">tb_students_score</span><span class="p">;</span>
<span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">max_score</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="o">|</span>       <span class="mi">100</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.06</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>由运行结果可以看到，<code>MAX()</code> 函数查询出 <code>student_score</code> 字段的最大值为 100。</p>
<p><code>MAX()</code> 函数不仅适用于查找数值类型，也可应用于字符类型。</p>
<p>如：在 <code>tb_students_score</code> 表中查找 <code>student_name</code> 的最大值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="nf">MAX</span><span class="p">(</span><span class="n">student_name</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kr">AS</span> <span class="n">max_name</span>
    <span class="o">-&gt;</span> <span class="n">FROM</span> <span class="n">tb_students_score</span><span class="p">;</span>
<span class="o">+----------+</span>
<span class="o">|</span> <span class="n">max_name</span> <span class="o">|</span>
<span class="o">+----------+</span>
<span class="o">|</span> <span class="n">Tom</span>      <span class="o">|</span>
<span class="o">+----------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.03</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>由运行结果可以看到，<code>MAX()</code> 函数可以对字母进行大小判断，并返回最大的字符或者字符串值。
注意：<code>MAX()</code> 函数还可以返回任意列中的最大值，包括返回字符类型的最大值。在对字符类型的数据进行比较时，按照字符的 ASCII 码值大小进行比较，从 a～z，a 的 ASCII 码最小，z 的最大。在比较时，先比较第一个字符，如果相等，继续比较下一个字符，一直到两个字符不相等或者字符结束为止。例如，b 与 t 比较时，t 为最大值；bcd 与 bca 比较时，bcd 为最大值。</p>
<h3 id="min">MIN函数：查询指定列的最小值</h3>
<p><code>MIN()</code> 函数是用来返回查询列中的最小值。</p>
<p>为了便于理解，需要用到在上一节讲 MAX() 函数时创建的数据表 <code>tb_students_score</code>。</p>
<p>如：在 <code>tb_students_score</code> 表中查找最低的成绩，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="nf">MIN</span><span class="p">(</span><span class="n">student_score</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kr">AS</span> <span class="n">min_score</span>
    <span class="o">-&gt;</span> <span class="n">FROM</span> <span class="n">tb_students_score</span><span class="p">;</span>
<span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">min_score</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="o">|</span>        <span class="mi">88</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>由结果可以看到，<code>MIN()</code> 函数查询出 <code>student_score</code> 字段的最小值为 88。
提示：<code>MIN()</code> 函数与 <code>MAX()</code> 函数类似，不仅适用于查找数值类型，也可应用于字符类型。</p>
<h3 id="count">COUNT函数：统计查询结果的行数</h3>
<p><code>COUNT()</code> 函数统计数据表中包含的记录行的总数，或者根据查询结果返回列中包含的数据行数，使用方法有以下两种：
<code>COUNT(*)</code> 计算表中总的行数，无论某列有数值或者为空值。
<code>COUNT(字段名)</code>计算指定列下总的行数，计算时将忽略空值的行。</p>
<p>这里需要用到以下在介绍 <code>MAX()</code> 函数时创建的表 <code>tb_students_score</code> 。</p>
<p>如：查询 <code>tb_students_score</code> 表中总的行数，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="nf">COUNT</span><span class="p">(</span><span class="n">student_name</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kr">AS</span> <span class="n">students_number</span>
    <span class="o">-&gt;</span> <span class="n">FROM</span> <span class="n">tb_students_score</span><span class="p">;</span>
<span class="o">+-----------------+</span>
<span class="o">|</span> <span class="n">students_number</span> <span class="o">|</span>
<span class="o">+-----------------+</span>
<span class="o">|</span>              <span class="mi">10</span> <span class="o">|</span>
<span class="o">+-----------------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.03</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>由查询结果可以看到，<code>COUNT(*)</code> 返回 <code>tb_students_score</code> 表中记录的总行数，无论值是什么。返回的总数的名称为 <code>students_number</code>。
提示：在计算总数的时候对待 NULL 值的方式是，指定列的值为空的行被 <code>COUNT()</code> 函数忽略，但若不指定列，而在 <code>COUNT()</code> 函数中使用星号“*”，则所有记录都不忽略。</p>
<h3 id="sum">SUM函数：求和</h3>
<p><code>SUM()</code> 是一个求总和的函数，返回指定列值的总和。</p>
<p><code>SUM()</code> 函数是如何工作的？
如果在没有返回匹配行 SELECT 语句中使用 SUM 函数，则 SUM 函数返回 NULL，而不是 0。
<code>DISTINCT</code> 运算符允许计算集合中的不同值。
<code>SUM</code> 函数忽略计算中的 NULL 值。</p>
<p>这里需要用到以下在介绍 <code>MAX()</code> 函数时创建的表 <code>tb_students_score</code> 。</p>
<p>如：在 <code>tb_students_score</code> 表中计算学生成绩的总分，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="nf">SUM</span><span class="p">(</span><span class="n">student_score</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kr">AS</span> <span class="n">score_sum</span>
    <span class="o">-&gt;</span> <span class="n">FROM</span> <span class="n">tb_students_score</span><span class="p">;</span>
<span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">score_sum</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="o">|</span>       <span class="mi">942</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>由查询结果可以看到，<code>SUM()</code> 函数返回学生的所有成绩之和为 942。
提示：<code>SUM()</code> 函数在计算时，忽略列值为 NULL 的行。</p>
<h3 id="avg">AVG函数：求平均值</h3>
<p><code>AVG()</code> 函数通过计算返回的行数和每一行数据的和，求得指定列数据的平均值。</p>
<p>这里需要用到以下在介绍 <code>MAX()</code> 函数时创建的表 <code>tb_students_score</code> 。</p>
<p>如：在 <code>tb_students_score</code> 表中，查询所有学生成绩的平均值，输入的 SQL 语句和执行结果如下所示。</p>
<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">AVG</span><span class="p">(</span><span class="n">student_score</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="kr">AS</span> <span class="n">score_avg</span>
    <span class="o">-&gt;</span> <span class="n">FROM</span> <span class="n">tb_students_score</span><span class="p">;</span>
<span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">score_avg</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="o">|</span>   <span class="mf">94.2000</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="mi">1</span> <span class="nf">row</span> <span class="kr">in</span> <span class="nf">set</span> <span class="p">(</span><span class="mf">0.03</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<p>提示：使用 <code>AVG()</code> 函数时，参数为要计算的列名称，若要得到多个列的平均值，则需要在每一列都使用 AVG() 函数。</p>
<h3 id="if">IF函数：判断</h3>
<p><code>IF</code> 语句允许您根据表达式的某个条件或值结果来执行一组 SQL 语句。</p>
<p>要形成一个表达式，可以结合文字，变量，运算符，甚至函数来组合。表达式可以返回 TRUE,FALSE 或 NULL，这三个值之一。</p>
<p>语法结构如下：</p>
<div class="codehilite"><pre><span></span><code><span class="k">IF</span><span class="ss">(</span><span class="nv">expr</span>,<span class="nv">v1</span>,<span class="nv">v2</span><span class="ss">)</span>
</code></pre></div>

<p>其中：表达式 expr 得到不同的结果，当 expr 为真是返回 v1 的值，否则返回 v2.</p>
<p>如：使用 <code>IF(expr,v1,v2)</code> 函数根据 expr 表达式结果返回相应值，输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="nv">mysql</span><span class="o">&gt;</span> <span class="nv">SELECT</span> <span class="k">IF</span><span class="ss">(</span><span class="mi">1</span><span class="o">&lt;</span><span class="mi">2</span>,<span class="mi">1</span>,<span class="mi">0</span><span class="ss">)</span> <span class="nv">c1</span>,<span class="k">IF</span><span class="ss">(</span><span class="mi">1</span><span class="o">&gt;</span><span class="mi">5</span>,<span class="s1">&#39;</span><span class="s">√</span><span class="s1">&#39;</span>,<span class="s1">&#39;</span><span class="s">×</span><span class="s1">&#39;</span><span class="ss">)</span> <span class="nv">c2</span>,<span class="k">IF</span><span class="ss">(</span><span class="nv">STRCMP</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">abc</span><span class="s1">&#39;</span>,<span class="s1">&#39;</span><span class="s">ab</span><span class="s1">&#39;</span><span class="ss">)</span>,<span class="s1">&#39;</span><span class="s">yes</span><span class="s1">&#39;</span>,<span class="s1">&#39;</span><span class="s">no</span><span class="s1">&#39;</span><span class="ss">)</span> <span class="nv">c3</span><span class="c1">;</span>
<span class="o">+----+----+-----+</span>
<span class="o">|</span> <span class="nv">c1</span> <span class="o">|</span> <span class="nv">c2</span> <span class="o">|</span> <span class="nv">c3</span>  <span class="o">|</span>
<span class="o">+----+----+-----+</span>
<span class="o">|</span>  <span class="mi">1</span> <span class="o">|</span>  × <span class="o">|</span> <span class="nv">yes</span> <span class="o">|</span>
<span class="o">+----+----+-----+</span>
<span class="mi">1</span> <span class="nv">row</span> <span class="nv">in</span> <span class="nv">set</span> <span class="ss">(</span><span class="mi">0</span>.<span class="mi">06</span> <span class="nv">sec</span><span class="ss">)</span>
</code></pre></div>

<p>由执行结果可以看出，在 c1 中，表达式 1&lt;2 所得的结果是 TRUE，则返回结果为 v1，即数值 1；在 c2 中，表达式 1&gt;5 所得的结果是 FALSE，则返回结果为 v2，即字符串 '×'；在 c3 中，先用 STRCMP(s1,s2) 函数比较两个字符串的大小，字符串 'abc' 和 'ab' 比较结果的返回值为 1，也就是表达式 expr 的返回结果不等于 0 且不等于 NULL，则返回值为 v1，即字符串 'yes'。</p>
<h3 id="ifnull">IFNULL函数：判断是否为空</h3>
<p><code>IFNULL</code> 函数是 MySQL 控制流函数之一，它接受两个参数，如果不是 NULL，则返回第一个参数。 否则，IFNULL 函数返回第二个参数。两个参数可以是文字值或表达式。</p>
<p>函数的语法：</p>
<div class="codehilite"><pre><span></span><code>IFNULL(v1,v2);
</code></pre></div>

<p>其中：如果 v1 不为 NULL，则 IFNULL 函数返回 v1; 否则返回 v2 的结果。</p>
<p>如：使用 <code>IFNULL(v1,v2)</code> 函数根据 v1 的取值返回相应值。输入 SQL 语句和执行结果如下。</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT IFNULL(5</span><span class="nt">,</span><span class="c">8)</span><span class="nt">,</span><span class="c">IFNULL(NULL</span><span class="nt">,</span><span class="c">&#39;OK&#39;)</span><span class="nt">,</span><span class="c">IFNULL(SQRT(</span><span class="nb">-</span><span class="c">8)</span><span class="nt">,</span><span class="c">&#39;FALSE&#39;)</span><span class="nt">,</span><span class="c">SQRT(</span><span class="nb">-</span><span class="c">8);</span>
<span class="nb">+-------------+-------------------+--------------------------+----------+</span><span class="c"></span>
<span class="c">| IFNULL(5</span><span class="nt">,</span><span class="c">8) | IFNULL(NULL</span><span class="nt">,</span><span class="c">&#39;OK&#39;) | IFNULL(SQRT(</span><span class="nb">-</span><span class="c">8)</span><span class="nt">,</span><span class="c">&#39;FALSE&#39;) | SQRT(</span><span class="nb">-</span><span class="c">8) |</span>
<span class="nb">+-------------+-------------------+--------------------------+----------+</span><span class="c"></span>
<span class="c">|           5 | OK                | FALSE                    |     NULL |</span>
<span class="nb">+-------------+-------------------+--------------------------+----------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，<code>IFNULL(v1,v2)</code> 函数中的参数 v1=5、v2=8，都不为空，即 v1=5 不为空，返回 v1 的值为 5；当 v1=NULL 时，返回 v2 的值，即字符串 'OK'；当 v1=SQRT(-8) 时，SQRT(-8) 函数的返回值为NULL，即 v1=NULL，所以返回 v2 为字符串 'false'。</p>
<h3 id="case">CASE函数：搜索语句</h3>
<p>条件语句 CASE。</p>
<p>CASE 语句有两种形式：简单的和可搜索 CASE 语句。</p>
<ul>
<li>简单的 CASE 语句
  简单的 CASE 语句就是指使用简单 CASE 语句来检查表达式的值与一组唯一值的匹配。</li>
</ul>
<p>简单的 CASE 语句的语法：</p>
<div class="codehilite"><pre><span></span><code><span class="kr">CASE</span>  <span class="o">&lt;</span><span class="err">表达式</span><span class="o">&gt;</span>
   <span class="n">WHEN</span> <span class="o">&lt;</span><span class="err">值</span><span class="mi">1</span><span class="o">&gt;</span> <span class="kr">THEN</span> <span class="o">&lt;</span><span class="err">操作</span><span class="o">&gt;</span>
   <span class="n">WHEN</span> <span class="o">&lt;</span><span class="err">值</span><span class="mi">2</span><span class="o">&gt;</span> <span class="kr">THEN</span> <span class="o">&lt;</span><span class="err">操作</span><span class="o">&gt;</span>
   <span class="p">...</span>
   <span class="kr">ELSE</span> <span class="o">&lt;</span><span class="err">操作</span><span class="o">&gt;</span>
<span class="kr">END</span> <span class="kr">CASE</span><span class="p">;</span>
</code></pre></div>

<p>其中：&lt;表达式&gt; 可以是任何有效的表达式。我们将 &lt;表达式&gt; 的值与每个 WHEN 子句中的值进行比较，例如 &lt;值1&gt;，&lt;值2&gt; 等。如果 &lt;表达式&gt; 和 &lt;值n&gt; 的值相等，则执行相应的 WHEN 分支中的命令 &lt;操作&gt;。如果 WHEN 子句中的 &lt;值n&gt; 没有与 &lt;表达式&gt; 的值匹配，则 ELSE 子句中的命令将被执行。ELSE 子句是可选的。 如果省略 ELSE 子句，并且找不到匹配项，MySQL 将引发错误。
如：使用 CASE 函数根据表达式的取值返回相应值，输入SQL 语句和执行结果如下</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT CASE WEEKDAY(NOW()) WHEN 0 THEN &#39;星期一&#39; WHEN 1 THEN &#39;星期二&#39; WHEN 2 THEN</span>
<span class="c"> &#39;星期三&#39; WHEN 3 THEN &#39;星期四&#39; WHEN 4 THEN &#39;星期五&#39; WHEN 5 THEN &#39;星期六&#39;ELSE &#39;星期天&#39; END</span>
<span class="c"> AS COLUMN1</span><span class="nt">,</span><span class="c">NOW()</span><span class="nt">,</span><span class="c">WEEKDAY(NOW())</span><span class="nt">,</span><span class="c">DAYNAME(NOW());</span>
<span class="nb">+---------+---------------------+----------------+----------------+</span><span class="c"></span>
<span class="c">| COLUMN1 | NOW()               | WEEKDAY(NOW()) | DAYNAME(NOW()) |</span>
<span class="nb">+---------+---------------------+----------------+----------------+</span><span class="c"></span>
<span class="c">|  星期二  | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 14:27:33 |              1 | Tuesday        |</span>
<span class="nb">+---------+---------------------+----------------+----------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>由执行结果可以看出，<code>NOW()</code> 函数得到当前系统时间是 2022年 4 月 19 日，DAYNAME(NOW()) 得到当天是 <code>Tuesday</code>，<code>WEEKDAY(NOW())</code> 函数返回当前时间的工作日索引是 1，即对应的是星期二。</p>
<ul>
<li>可搜索的 CASE 语句
  简单 CASE 语句仅允许将表达式的值与一组不同的值进行匹配。 为了执行更复杂的匹配，如范围，则可以使用可搜索 CASE 语句。 可搜索 CASE 语句等同于 IF 语句，但是它的构造更加可读。
  可搜索CASE语句的语法：</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kr">CASE</span>
    <span class="n">WHEN</span> <span class="o">&lt;</span><span class="err">条件</span><span class="mi">1</span><span class="o">&gt;</span> <span class="kr">THEN</span> <span class="o">&lt;</span><span class="err">命令</span><span class="o">&gt;</span>
    <span class="n">WHEN</span> <span class="o">&lt;</span><span class="err">条件</span><span class="mi">2</span><span class="o">&gt;</span> <span class="kr">THEN</span> <span class="o">&lt;</span><span class="err">命令</span><span class="o">&gt;</span>
    <span class="p">...</span>
    <span class="kr">ELSE</span> <span class="n">commands</span>
<span class="kr">END</span> <span class="kr">CASE</span><span class="p">;</span>
</code></pre></div>

<p>MySQL 分别计算 WHEN 子句中的每个条件，直到找到一个值为 TRUE 的条件，然后执行 THEN 子句中的相应 &lt;命令&gt;。如果没有一个条件为 TRUE，则执行 ELSE 子句中的 &lt;命令&gt;。如果不指定 ELSE 子句，并且没有一个条件为 TRUE，MySQL 将发出错误消息。MySQL 不允许在 THEN 或 ELSE 子句中使用空的命令。 如果您不想处理 ELSE 子句中的逻辑，同时又要防止 MySQL 引发错误，则可以在 ELSE 子句中放置一个空的 BEGIN END 块。</p>
<p>如：使用 CASE 函数根据表达式的取值返回相应值，输入SQL 语句和执行结果如下</p>
<div class="codehilite"><pre><span></span><code><span class="c">mysql</span><span class="nv">&gt;</span><span class="c"> SELECT CASE WHEN WEEKDAY(NOW())=0 THEN &#39;星期一&#39; WHEN WEEKDAY(NOW())=1 THEN &#39;星期二&#39;</span>
<span class="c"> WHEN WEEKDAY(NOW())=2 THEN &#39;星期三&#39; WHEN WEEKDAY(NOW())=3 THEN &#39;星期四&#39; WHEN WEEKDAY(NOW())=4</span>
<span class="c"> THEN &#39;星期五&#39; WHEN WEEKDAY(NOW())=5 THEN &#39;星期六&#39; WHEN WEEKDAY(NOW())=6 THEN &#39;星期天&#39; END</span>
<span class="c"> AS COLUMN1</span><span class="nt">,</span><span class="c">NOW()</span><span class="nt">,</span><span class="c">WEEKDAY(NOW())</span><span class="nt">,</span><span class="c">DAYNAME(NOW());</span>
<span class="nb">+---------+---------------------+----------------+----------------+</span><span class="c"></span>
<span class="c">| COLUMN1 | NOW()               | WEEKDAY(NOW()) | DAYNAME(NOW()) |</span>
<span class="nb">+---------+---------------------+----------------+----------------+</span><span class="c"></span>
<span class="c">| 星期二  | 2022</span><span class="nb">-</span><span class="c">04</span><span class="nb">-</span><span class="c">19 14:30:03 |              1 | Tuesday        |</span>
<span class="nb">+---------+---------------------+----------------+----------------+</span><span class="c"></span>
<span class="c">1 row in set (0</span><span class="nt">.</span><span class="c">00 sec)</span>
</code></pre></div>

<p>此例跟上例的返回结果一样，只是使用了 CASE 函数的不同写法，WHEN 后面为表达式，当表达式的返回结果为 TRUE 时取 THEN 后面的值，如果都不是，则返回 ELSE 后面的值。</p></div>
    </div>
    <input class="xswitch xonoff" type="checkbox" id="nvacatalog">
    <div class="nav">
      <ul>
        
        <li><a href="https://testpoo.github.io/常用链接.html"><span><label style="color: #38b6fd"></label>&nbsp;常用链接</span></a></li>
        
        <li><a href="https://testpoo.github.io/mysql函数汇总.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql函数汇总</span></a></li>
        
        <li><a href="https://testpoo.github.io/shell简介.html"><span><label style="color: #38b6fd"></label>&nbsp;shell简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Docker入门教程.html"><span><label style="color: #38b6fd"></label>&nbsp;Docker入门教程</span></a></li>
        
        <li><a href="https://testpoo.github.io/性能监控各指令详解.html"><span><label style="color: #38b6fd"></label>&nbsp;性能监控各指令详解</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python进阶.html"><span><label style="color: #38b6fd"></label>&nbsp;Python进阶</span></a></li>
        
        <li><a href="https://testpoo.github.io/Git简介.html"><span><label style="color: #38b6fd"></label>&nbsp;Git简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python正则表达式.html"><span><label style="color: #38b6fd"></label>&nbsp;Python正则表达式</span></a></li>
        
        <li><a href="https://testpoo.github.io/nose简介.html"><span><label style="color: #38b6fd"></label>&nbsp;nose简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python自动化之unittest.html"><span><label style="color: #38b6fd"></label>&nbsp;Python自动化之unittest</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian+gnome安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;debian+gnome安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian+i3安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;debian+i3安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian+xfce安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;debian+xfce安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/mysql的安装.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql的安装</span></a></li>
        
        <li><a href="https://testpoo.github.io/分分种学会python3.html"><span><label style="color: #38b6fd"></label>&nbsp;分分种学会python3</span></a></li>
        
        <li><a href="https://testpoo.github.io/Markdown笔记.html"><span><label style="color: #38b6fd"></label>&nbsp;Markdown笔记</span></a></li>
        
        <li><a href="https://testpoo.github.io/SQLite基本操作.html"><span><label style="color: #38b6fd"></label>&nbsp;SQLite基本操作</span></a></li>
        
        <li><a href="https://testpoo.github.io/Linux下SVN服务器的搭建.html"><span><label style="color: #38b6fd"></label>&nbsp;Linux下SVN服务器的搭建</span></a></li>
        
        <li><a href="https://testpoo.github.io/Debain必备软件.html"><span><label style="color: #38b6fd"></label>&nbsp;Debain必备软件</span></a></li>
        
        <li><a href="https://testpoo.github.io/mysql笔记.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql笔记</span></a></li>
        
        <li><a href="https://testpoo.github.io/python标准异常.html"><span><label style="color: #38b6fd"></label>&nbsp;python标准异常</span></a></li>
        
        <li><a href="https://testpoo.github.io/svn命令全解.html"><span><label style="color: #38b6fd"></label>&nbsp;svn命令全解</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian命令apt和dpkg用法.html"><span><label style="color: #38b6fd"></label>&nbsp;debian命令apt和dpkg用法</span></a></li>
        
        <li><a href="https://testpoo.github.io/关于我.html"><span><label style="color: #38b6fd"></label>&nbsp;关于我</span></a></li>
        
      </ul>
    </div>
  </body>

  </html>