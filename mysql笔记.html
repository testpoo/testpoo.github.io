<!doctype html>
  <html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>测试铺</title>
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/markdown.css">
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/style.css">
    <link rel="shortcut icon" type="image/ico" href="https://testpoo.github.io/themes/img/favicon.ico">
  </head>

  

  <body>
    <div class="sider">
      <div class="categories">
        <div class="title">
          <a href="https://testpoo.github.io">
            <img src="https://testpoo.github.io/themes/img/title.jpg">
            <div class="linkbutton testpoo">测试铺</div>
          </a>
        </div>
        <div class="scrollheight">
          <ul>
            
            <li><a href="https://testpoo.github.io/关于我.html"><label style="color: #38b6fd"></label>&nbsp;关于我</a></li>
            
            <li><a href="https://testpoo.github.io/网址集.html"><label style="color: #38b6fd"></label>&nbsp;网址集</a></li>
            
            <li><a href="https://testpoo.github.io/问题集.html"><label style="color: #38b6fd"></label>&nbsp;问题集</a></li>
            
            <li><a href="https://testpoo.github.io/人生的最高境界.html"><label style="color: #38b6fd"></label>&nbsp;摘录</a></li>
            
            <li><a href="https://testpoo.github.io/CSS代码小抄.html"><label style="color: #38b6fd"></label>&nbsp;代码小抄</a></li>
            
            <li><a href="https://testpoo.github.io/debian安装设置.html"><label style="color: #38b6fd"></label>&nbsp;系统安装</a></li>
            
            <li><a href="https://testpoo.github.io/shell三剑客简介.html"><label style="color: #38b6fd"></label>&nbsp;技术</a></li>
            
            <li><a href="https://testpoo.github.io/Python造假数据神器Faker.html"><label style="color: #38b6fd"></label>&nbsp;测试</a></li>
            
          </ul>
        </div>
        <div class="github"><a href="https://github.com/testpoo" target="_blank" title="GitHub:https://github.com/testpoo"></a><a href="#" title="微信号：puyaweis"></a><a href="#" title="邮箱：pu_yawei@qq.com"></a><a href="https://testpoo.github.io/rss.xml" target="_blank"></a></div>
      </div>
      <div class="articles">
        <div class="category"> 技术</div>
        <div class="scrollheight">
          <ul>
            
            <a href="https://testpoo.github.io/shell三剑客简介.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;shell三剑客简介</span><span>2024-02-29&nbsp;&nbsp;共31601个字</span><span class="tag">linux</span><span class="tag">awk</span><span class="tag">grep</span><span class="tag">sed</span></li></a>
            
            <a href="https://testpoo.github.io/Jinja2简介.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Jinja2简介</span><span>2024-02-29&nbsp;&nbsp;共17868个字</span><span class="tag">jinja2</span><span class="tag">python</span></li></a>
            
            <a href="https://testpoo.github.io/FastApi简析.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;FastApi简析</span><span>2023-12-06&nbsp;&nbsp;共27029个字</span><span class="tag">fastapi</span><span class="tag">python</span></li></a>
            
            <a href="https://testpoo.github.io/go入门.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;go入门</span><span>2023-08-15&nbsp;&nbsp;共77145个字</span><span class="tag">go</span></li></a>
            
            <a href="https://testpoo.github.io/tkinter教程.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;tkinter教程</span><span>2022-11-14&nbsp;&nbsp;共294566个字</span><span class="tag">python</span><span class="tag">tkinter</span></li></a>
            
            <a href="https://testpoo.github.io/mysql函数汇总.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;mysql函数汇总</span><span>2022-04-18&nbsp;&nbsp;共92343个字</span><span class="tag">mysql</span></li></a>
            
            <a href="https://testpoo.github.io/shell简介.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;shell简介</span><span>2022-04-18&nbsp;&nbsp;共32868个字</span><span class="tag">linux</span><span class="tag">shell</span></li></a>
            
            <a href="https://testpoo.github.io/Docker入门教程.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Docker入门教程</span><span>2022-03-02&nbsp;&nbsp;共30418个字</span><span class="tag">docker</span></li></a>
            
            <a href="https://testpoo.github.io/Python进阶.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Python进阶</span><span>2021-11-30&nbsp;&nbsp;共147064个字</span><span class="tag">python</span></li></a>
            
            <a href="https://testpoo.github.io/Git简介.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Git简介</span><span>2021-09-15&nbsp;&nbsp;共44846个字</span><span class="tag">git</span></li></a>
            
            <a href="https://testpoo.github.io/Python正则表达式.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Python正则表达式</span><span>2021-06-23&nbsp;&nbsp;共45550个字</span><span class="tag">python</span><span class="tag">正则表达式</span></li></a>
            
            <a href="https://testpoo.github.io/mysql的安装.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;mysql的安装</span><span>2020.05.09&nbsp;&nbsp;共20910个字</span><span class="tag">mysql</span><span class="tag">安装</span></li></a>
            
            <a href="https://testpoo.github.io/分分种学会python3.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;分分种学会python3</span><span>2020-05-14&nbsp;&nbsp;共39947个字</span><span class="tag">python</span></li></a>
            
            <a href="https://testpoo.github.io/Markdown笔记.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Markdown笔记</span><span>2020-04-03&nbsp;&nbsp;共15286个字</span><span class="tag">markdown</span></li></a>
            
            <a href="https://testpoo.github.io/Linux下SVN服务器的搭建.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;Linux下SVN服务器的搭建</span><span>2020-01-01&nbsp;&nbsp;共62055个字</span><span class="tag">svn</span><span class="tag">linux</span></li></a>
            
            <a href="https://testpoo.github.io/svn命令全解.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;svn命令全解</span><span>2019-10-11&nbsp;&nbsp;共7219个字</span><span class="tag">svn</span></li></a>
            
            <a href="https://testpoo.github.io/mysql笔记.html#current"><li style="background: #f9fafb;border: 0px;" id="current"><span><label style="color: #38b6fd"></label>&nbsp;mysql笔记</span><span>2019-10-11&nbsp;&nbsp;共21756个字</span><span class="tag">mysql</span></li></a>
            
            <a href="https://testpoo.github.io/python标准异常.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;python标准异常</span><span>2019-10-11&nbsp;&nbsp;共2649个字</span><span class="tag">python</span><span class="tag">标准异常</span></li></a>
            
            <a href="https://testpoo.github.io/debian命令apt和dpkg用法.html#current"><li ><span><label style="color: #38b6fd"></label>&nbsp;debian命令apt和dpkg用法</span><span>2019-07-05&nbsp;&nbsp;共11758个字</span><span class="tag">debian</span><span class="tag">apt</span><span class="tag">dpkg</span></li></a>
            
          </ul>
        </div>
        <div class="item-num">总共19项</div>
      </div>
    </div>
    <div class="main">
      <div class="header"><span>mysql笔记</span><span>人生如逆旅，我亦是行人。<br />最后更新于2024-12-28 20:49:58</span></div>
      <input class="pswitch ponoff" type="checkbox" id="catalog">
      <div class="posts">
        <div class="toc">
<ul>
<li><a href="#_1">创建用户</a></li>
<li><a href="#mysql">MYSQL配置</a></li>
<li><a href="#_2">字段增加删除修改</a></li>
<li><a href="#_3">替换特定字段的值</a></li>
<li><a href="#_4">查找库中含有特定字段的表</a></li>
<li><a href="#auto_increment">修改auto_increment</a></li>
<li><a href="#foreign_key_checks">查询FOREIGN_KEY_CHECKS的值</a></li>
<li><a href="#_5">备份数据库</a></li>
<li><a href="#mysql_1">MYSQL卡死了就这样搞</a></li>
<li><a href="#mysql_2">Mysql复制表结构、表数据的方法</a></li>
<li><a href="#_6">导出表结构和数据</a></li>
</ul>
</div>
<h3 id="_1">创建用户</h3>
<p>非本地登录</p>
<div class="codehilite"><pre><span></span><code>CREATE USER &#39;test&#39;@&#39;%&#39; IDENTIFIED BY &#39;test&#39;;
</code></pre></div>

<p>本地登录</p>
<div class="codehilite"><pre><span></span><code>CREATE USER &#39;test&#39;@&#39;127.0.0.1&#39; IDENTIFIED BY &#39;test&#39;;
CREATE USER &#39;test&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;test&#39;;
</code></pre></div>

<p>创建数据库</p>
<div class="codehilite"><pre><span></span><code>CREATE database testrcb default character set utf8 collate utf8_general_ci;
</code></pre></div>

<p>给用户授权</p>
<div class="codehilite"><pre><span></span><code><span class="n">grant</span><span class="w"> </span><span class="n">select</span><span class="p">,</span><span class="n">delete</span><span class="p">,</span><span class="n">update</span><span class="p">,</span><span class="n">create</span><span class="p">,</span><span class="n">drop</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">testrcb</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">test</span><span class="s">@&quot;%&quot;</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">增删改查</span>
<span class="n">grant</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">privileges</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">testrcb</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">test</span><span class="p">@</span><span class="n">localhost</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="err">&#39;</span><span class="n">test</span><span class="err">&#39;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">all</span>
</code></pre></div>

<p>修改密码</p>
<div class="codehilite"><pre><span></span><code>UPDATE mysql.user SET PASSWORD=PASSWORD(&#39;test&#39;) WHERE User = &#39;test&#39;
</code></pre></div>

<h3 id="mysql">MYSQL配置</h3>
<div class="codehilite"><pre><span></span><code><span class="k">[mysql]</span>

<span class="c1"># 设置mysql客户端默认字符集</span>

<span class="na">default-character-set</span><span class="o">=</span><span class="s">utf8</span><span class="w"> </span>

<span class="k">[mysqld]</span>

<span class="c1">#设置3306端口</span>
<span class="na">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3306</span><span class="w"> </span>

<span class="c1"># 设置mysql的安装目录</span>
<span class="na">basedir</span><span class="o">=</span><span class="s">C:\Program Files\MySQL\MySQL Server 5.6</span>

<span class="c1"># 设置mysql数据库的数据的存放目录</span>
<span class="na">datadir</span><span class="o">=</span><span class="s">C:\Program Files\MySQL\MySQL Server 5.6\data</span>

<span class="c1"># 允许最大连接数</span>
<span class="na">max_connections</span><span class="o">=</span><span class="s">200</span>

<span class="c1"># 服务端使用的字符集默认为8比特编码的latin1字符集</span>
<span class="na">character-set-server</span><span class="o">=</span><span class="s">utf8</span>

<span class="c1"># 创建新表时将使用的默认存储引擎</span>
<span class="na">default-storage-engine</span><span class="o">=</span><span class="s">INNODB</span>
<span class="na">Access denied for user &#39;test&#39;@&#39;localhost&#39; (using password</span><span class="o">:</span><span class="w"> </span><span class="s">YES)</span>
</code></pre></div>

<h3 id="_2">字段增加删除修改</h3>
<div class="codehilite"><pre><span></span><code><span class="n">添加字段的语法</span><span class="err">：</span><span class="n">alter</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">tablename</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="n">column</span><span class="w"> </span><span class="n">datatype</span><span class="w"> </span><span class="p">[</span><span class="k">default</span><span class="w"> </span><span class="n">value</span><span class="p">][</span><span class="n">null</span><span class="o">/</span><span class="n">not</span><span class="w"> </span><span class="n">null</span><span class="p">],</span><span class="err">…</span><span class="p">.);</span>
<span class="n">修改字段的语法</span><span class="err">：</span><span class="n">alter</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">tablename</span><span class="w"> </span><span class="n">modify</span><span class="w"> </span><span class="p">(</span><span class="n">column</span><span class="w"> </span><span class="n">datatype</span><span class="w"> </span><span class="p">[</span><span class="k">default</span><span class="w"> </span><span class="n">value</span><span class="p">][</span><span class="n">null</span><span class="o">/</span><span class="n">not</span><span class="w"> </span><span class="n">null</span><span class="p">],</span><span class="err">…</span><span class="p">.);</span>
<span class="n">删除字段的语法</span><span class="err">：</span><span class="n">alter</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">tablename</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="p">(</span><span class="n">column</span><span class="p">);</span>

<span class="n">mysql修改字段类型</span><span class="err">：</span>
<span class="o">--</span><span class="n">能修改字段类型</span><span class="err">、</span><span class="n">类型长度</span><span class="err">、</span><span class="n">默认值</span><span class="err">、</span><span class="n">注释</span>
<span class="o">--</span><span class="n">对某字段进行修改</span>
<span class="n">ALTER</span><span class="w">  </span><span class="n">TABLE</span><span class="w"> </span><span class="n">表名</span><span class="w"> </span><span class="n">MODIFY</span><span class="w"> </span><span class="n">COLUMN</span><span class="w"> </span><span class="n">字段名</span><span class="w"> </span><span class="n">新数据类型</span><span class="w"> </span><span class="n">新类型长度</span><span class="w">  </span><span class="n">新默认值</span><span class="w">  </span><span class="n">新注释</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">COLUMN可以省略</span>
<span class="n">alter</span><span class="w">  </span><span class="n">table</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">modify</span><span class="w">  </span><span class="n">column</span><span class="w"> </span><span class="n">column1</span><span class="w">  </span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="err">&#39;</span><span class="n">注释</span><span class="err">&#39;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">正常</span><span class="err">，</span><span class="n">能修改字段类型</span><span class="err">、</span><span class="n">类型长度</span><span class="err">、</span><span class="n">默认值</span><span class="err">、</span><span class="n">注释</span>

<span class="n">mysql修改字段名</span><span class="err">：</span>
<span class="n">ALTER</span><span class="w">  </span><span class="n">TABLE</span><span class="w"> </span><span class="n">表名</span><span class="w"> </span><span class="n">CHANGE</span><span class="w"> </span><span class="n">旧字段名</span><span class="w"> </span><span class="n">新字段名</span><span class="w"> </span><span class="n">新数据类型</span><span class="p">;</span><span class="w">     </span>
<span class="n">alter</span><span class="w">  </span><span class="n">table</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="n">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="mf">1.2</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="err">&#39;</span><span class="n">注释</span><span class="err">&#39;</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">正常</span><span class="err">，</span><span class="n">此时字段名称没有改变</span><span class="err">，</span><span class="n">能修改字段类型</span><span class="err">、</span><span class="n">类型长度</span><span class="err">、</span><span class="n">默认值</span><span class="err">、</span><span class="n">注释</span>
<span class="n">alter</span><span class="w">  </span><span class="n">table</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="n">column2</span><span class="w"> </span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="err">&#39;</span><span class="n">注释</span><span class="err">&#39;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">正常</span><span class="err">，</span><span class="n">能修改字段名</span><span class="err">、</span><span class="n">字段类型</span><span class="err">、</span><span class="n">类型长度</span><span class="err">、</span><span class="n">默认值</span><span class="err">、</span><span class="n">注释</span>
<span class="n">alter</span><span class="w">  </span><span class="n">table</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">column2</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="n">decimal</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">DEFAULT</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="n">COMMENT</span><span class="w"> </span><span class="err">&#39;</span><span class="n">注释</span><span class="err">&#39;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">正常</span><span class="err">，</span><span class="n">能修改字段名</span><span class="err">、</span><span class="n">字段类型</span><span class="err">、</span><span class="n">类型长度</span><span class="err">、</span><span class="n">默认值</span><span class="err">、</span><span class="n">注释</span>
<span class="n">alter</span><span class="w">  </span><span class="n">table</span><span class="w"> </span><span class="n">table1</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">column1</span><span class="w"> </span><span class="n">column2</span><span class="p">;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">报错</span><span class="w">  </span>
</code></pre></div>

<h3 id="_3">替换特定字段的值</h3>
<div class="codehilite"><pre><span></span><code>update hoyi_zfb_activity_enroll set shop_name = replace(shop_name,&#39;Test&#39;,&#39;&#39;); 
</code></pre></div>

<h3 id="_4">查找库中含有特定字段的表</h3>
<div class="codehilite"><pre><span></span><code>SELECT <span class="gs">* FROM information_schema.columns WHERE column_name=&#39;shop_name&#39; AND table_schema = &#39;tyrcb14&#39;; </span>
<span class="gs">SELECT *</span> FROM information_schema.tables WHERE TABLE_NAME LIKE &#39;%shop%&#39; AND table_schema = &#39;tyrcb14&#39;; 
</code></pre></div>

<h3 id="auto_increment">修改auto_increment</h3>
<div class="codehilite"><pre><span></span><code>alter table hoyi_etc_order auto_increment=38;
</code></pre></div>

<h3 id="foreign_key_checks">查询FOREIGN_KEY_CHECKS的值</h3>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nb">@@FOREIGN_KEY_CHECKS</span><span class="p">;</span><span class="w"> </span>
</code></pre></div>

<h3 id="_5">备份数据库</h3>
<div class="codehilite"><pre><span></span><code>mysqldump -utest -p123 --databases test  &gt; testdp.sql
mysqldump -utest -p123 --databases test  &lt; testdp.sql
</code></pre></div>

<h3 id="mysql_1">MYSQL卡死了就这样搞</h3>
<div class="codehilite"><pre><span></span><code>SHOW PROCESSLIST;
SELECT <span class="gs">* FROM information_schema.innodb_trx;</span>
<span class="gs">SELECT *</span> FROM  performance_schema.events_statements_current WHERE sql_text LIKE &#39;%video%&#39;;
KILL XXX;
</code></pre></div>

<h3 id="mysql_2">Mysql复制表结构、表数据的方法</h3>
<div class="codehilite"><pre><span></span><code><span class="mf">1</span><span class="err">、</span><span class="n">复制表结构及数据到新表</span><span class="err">（</span><span class="n">不包含主键</span><span class="err">、</span><span class="n">索引</span><span class="err">、</span><span class="n">分区等</span><span class="err">）</span>

<span class="n">CREATE</span><span class="w"> </span><span class="nb">TAB</span><span class="n">LE</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">旧表</span>

<span class="n">或</span><span class="w"> </span><span class="n">CREATE</span><span class="w"> </span><span class="nb">TAB</span><span class="n">LE</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">旧表</span>

<span class="n">这种方法将旧表基本结构和数据复制到新表</span><span class="err">。</span>

<span class="n">不过这种方法的一个最不好的地方就是新表中没有了旧表的主键</span><span class="err">、</span><span class="n">索引</span><span class="err">、</span><span class="n">Extra</span><span class="err">（</span><span class="n">auto_increment</span><span class="err">，</span><span class="n">字符集编码及排序</span><span class="err">）、</span><span class="n">注释</span><span class="err">、</span><span class="n">分区等属性</span><span class="w"> </span><span class="n">以及触发器</span><span class="err">、</span><span class="n">外键等</span><span class="err">。</span>

<span class="mf">2</span><span class="err">、</span><span class="n">只复制表结构到新表</span>

<span class="n">CREATE</span><span class="w"> </span><span class="nb">TAB</span><span class="n">LE</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">旧表</span><span class="w"> </span><span class="n">WHERE</span><span class="w"> </span><span class="mf">1</span><span class="o">=</span><span class="mf">2</span><span class="w"> </span><span class="err">（</span><span class="n">只是第一种方式去除掉数据</span><span class="err">）</span>

<span class="n">CREATE</span><span class="w"> </span><span class="nb">TAB</span><span class="n">LE</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">LIKE</span><span class="w"> </span><span class="n">旧表</span>

<span class="n">这种方式的复制可以复制旧表的主键</span><span class="err">、</span><span class="n">索引</span><span class="err">、</span><span class="n">Extra</span><span class="err">（</span><span class="n">auto_increment</span><span class="err">，</span><span class="n">字符集编码及排序</span><span class="err">）、</span><span class="n">注释</span><span class="err">、</span><span class="n">分区等属性</span><span class="err">。</span><span class="n">但是不包含触发器</span><span class="err">、</span><span class="n">外键等</span>

<span class="mf">3</span><span class="err">、</span><span class="n">复制旧表的数据到新表</span>

<span class="n">INSERT</span><span class="w"> </span><span class="nb">INT</span><span class="n">O</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">旧表</span>

<span class="n">INSERT</span><span class="w"> </span><span class="nb">INT</span><span class="n">O</span><span class="w"> </span><span class="n">新表</span><span class="p">(</span><span class="n">字段1</span><span class="p">,</span><span class="n">字段2</span><span class="p">,</span><span class="mf">.......</span><span class="p">)</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="n">字段1</span><span class="p">,</span><span class="n">字段2</span><span class="p">,</span><span class="mf">......</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">旧表</span>

<span class="n">上面两条语句的前提是新表已经存在</span>

<span class="mf">4</span><span class="err">、</span><span class="n">复制表结构及数据到新表</span><span class="err">（</span><span class="n">包含主键</span><span class="err">、</span><span class="n">索引</span><span class="err">、</span><span class="n">分区等</span><span class="err">）</span>

<span class="n">结合上述第2</span><span class="err">、</span><span class="mf">3</span><span class="n">点</span><span class="err">，</span><span class="n">即</span><span class="err">：</span>

<span class="n">先</span><span class="w"> </span><span class="n">CREATE</span><span class="w"> </span><span class="nb">TAB</span><span class="n">LE</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">LIKE</span><span class="w"> </span><span class="n">旧表</span>

<span class="n">然后</span><span class="w"> </span><span class="n">INSERT</span><span class="w"> </span><span class="nb">INT</span><span class="n">O</span><span class="w"> </span><span class="n">新表</span><span class="w"> </span><span class="n">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="n">旧表</span>
</code></pre></div>

<h3 id="_6">导出表结构和数据</h3>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="n">导出结构不导出数据</span>
<span class="n">mysqldump</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="n">数据库名</span><span class="w"> </span><span class="o">-</span><span class="n">uroot</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">xxx</span><span class="mf">.</span><span class="n">sql</span>

<span class="mf">2.</span><span class="n">导出数据不导出结构</span>
<span class="n">mysqldump</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">数据库名</span><span class="w"> </span><span class="o">-</span><span class="n">uroot</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">xxx</span><span class="mf">.</span><span class="n">sql</span>

<span class="mf">3.</span><span class="n">导出数据和表结构</span>
<span class="n">mysqldump</span><span class="w"> </span><span class="n">数据库名</span><span class="w"> </span><span class="o">-</span><span class="n">uroot</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">xxx</span><span class="mf">.</span><span class="n">sql</span>

<span class="mf">4.</span><span class="n">导出特定表的结构</span>
<span class="n">mysqldump</span><span class="w"> </span><span class="o">-</span><span class="n">uroot</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">-</span><span class="n">B数据库名</span><span class="w"> </span><span class="o">--</span><span class="nb">tab</span><span class="n">le</span><span class="w"> </span><span class="n">表名</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">xxx</span><span class="mf">.</span><span class="n">sql</span>
</code></pre></div>
        <div class="copyright">
          <ul>
            <li>本文作者：畄月寒</li>
            <li>本文链接：<a href="https://testpoo.github.io/mysql笔记.html">https://testpoo.github.io/mysql笔记.html</a></li>
            <li>版权声明：本铺所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh-hans"> BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
          </ul>
        </div>
      </div>
    </div>
    <input class="pswitch ponoff" type="checkbox" id="nvacatalog">
    <div class="nav">
      <ul>
        
        <li><a href="https://testpoo.github.io/关于我.html"><span><label style="color: #38b6fd"></label>&nbsp;关于我</span></a></li>
        
        <li><a href="https://testpoo.github.io/网址集.html"><span><label style="color: #38b6fd"></label>&nbsp;网址集</span></a></li>
        
        <li><a href="https://testpoo.github.io/问题集.html"><span><label style="color: #38b6fd"></label>&nbsp;问题集</span></a></li>
        
        <li><a href="https://testpoo.github.io/人生的最高境界.html"><span><label style="color: #38b6fd"></label>&nbsp;人生的最高境界</span></a></li>
        
        <li><a href="https://testpoo.github.io/中国朝代顺序口诀.html"><span><label style="color: #38b6fd"></label>&nbsp;中国朝代顺序口诀</span></a></li>
        
        <li><a href="https://testpoo.github.io/国际象棋棋子代号.html"><span><label style="color: #38b6fd"></label>&nbsp;国际象棋棋子代号</span></a></li>
        
        <li><a href="https://testpoo.github.io/CSS代码小抄.html"><span><label style="color: #38b6fd"></label>&nbsp;CSS代码小抄</span></a></li>
        
        <li><a href="https://testpoo.github.io/婚书两则.html"><span><label style="color: #38b6fd"></label>&nbsp;婚书两则</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian安装设置.html"><span><label style="color: #38b6fd"></label>&nbsp;debian安装设置</span></a></li>
        
        <li><a href="https://testpoo.github.io/javascript代码小抄.html"><span><label style="color: #38b6fd"></label>&nbsp;javascript代码小抄</span></a></li>
        
        <li><a href="https://testpoo.github.io/python代码小抄.html"><span><label style="color: #38b6fd"></label>&nbsp;python代码小抄</span></a></li>
        
        <li><a href="https://testpoo.github.io/独孤羊放妻春条书.html"><span><label style="color: #38b6fd"></label>&nbsp;独孤羊放妻春条书</span></a></li>
        
        <li><a href="https://testpoo.github.io/只有一个读音的九篇古文.html"><span><label style="color: #38b6fd"></label>&nbsp;只有一个读音的九篇古文</span></a></li>
        
        <li><a href="https://testpoo.github.io/Arch通过archinstall安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;Arch通过archinstall安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/shell三剑客简介.html"><span><label style="color: #38b6fd"></label>&nbsp;shell三剑客简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Jinja2简介.html"><span><label style="color: #38b6fd"></label>&nbsp;Jinja2简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python造假数据神器Faker.html"><span><label style="color: #38b6fd"></label>&nbsp;Python造假数据神器Faker</span></a></li>
        
        <li><a href="https://testpoo.github.io/FastApi简析.html"><span><label style="color: #38b6fd"></label>&nbsp;FastApi简析</span></a></li>
        
        <li><a href="https://testpoo.github.io/go测试库apitest简介.html"><span><label style="color: #38b6fd"></label>&nbsp;go测试库apitest简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/go入门.html"><span><label style="color: #38b6fd"></label>&nbsp;go入门</span></a></li>
        
        <li><a href="https://testpoo.github.io/Arch手动安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;Arch手动安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/BeautifulSoup简介.html"><span><label style="color: #38b6fd"></label>&nbsp;BeautifulSoup简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/tkinter教程.html"><span><label style="color: #38b6fd"></label>&nbsp;tkinter教程</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian+openbox安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;debian+openbox安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/面试问答.html"><span><label style="color: #38b6fd"></label>&nbsp;面试问答</span></a></li>
        
        <li><a href="https://testpoo.github.io/UI自动化测试神器-Cypress.html"><span><label style="color: #38b6fd"></label>&nbsp;UI自动化测试神器-Cypress</span></a></li>
        
        <li><a href="https://testpoo.github.io/如何用自动化测试搞垮团队.html"><span><label style="color: #38b6fd"></label>&nbsp;如何用自动化测试搞垮团队</span></a></li>
        
        <li><a href="https://testpoo.github.io/mysql函数汇总.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql函数汇总</span></a></li>
        
        <li><a href="https://testpoo.github.io/shell简介.html"><span><label style="color: #38b6fd"></label>&nbsp;shell简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Docker入门教程.html"><span><label style="color: #38b6fd"></label>&nbsp;Docker入门教程</span></a></li>
        
        <li><a href="https://testpoo.github.io/性能监控各指令详解.html"><span><label style="color: #38b6fd"></label>&nbsp;性能监控各指令详解</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python进阶.html"><span><label style="color: #38b6fd"></label>&nbsp;Python进阶</span></a></li>
        
        <li><a href="https://testpoo.github.io/Git简介.html"><span><label style="color: #38b6fd"></label>&nbsp;Git简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python正则表达式.html"><span><label style="color: #38b6fd"></label>&nbsp;Python正则表达式</span></a></li>
        
        <li><a href="https://testpoo.github.io/nose简介.html"><span><label style="color: #38b6fd"></label>&nbsp;nose简介</span></a></li>
        
        <li><a href="https://testpoo.github.io/Python自动化之unittest.html"><span><label style="color: #38b6fd"></label>&nbsp;Python自动化之unittest</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian+i3安装过程.html"><span><label style="color: #38b6fd"></label>&nbsp;debian+i3安装过程</span></a></li>
        
        <li><a href="https://testpoo.github.io/mysql的安装.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql的安装</span></a></li>
        
        <li><a href="https://testpoo.github.io/紫薇斗数解析.html"><span><label style="color: #38b6fd"></label>&nbsp;紫薇斗数解析</span></a></li>
        
        <li><a href="https://testpoo.github.io/分分种学会python3.html"><span><label style="color: #38b6fd"></label>&nbsp;分分种学会python3</span></a></li>
        
        <li><a href="https://testpoo.github.io/Markdown笔记.html"><span><label style="color: #38b6fd"></label>&nbsp;Markdown笔记</span></a></li>
        
        <li><a href="https://testpoo.github.io/Linux下SVN服务器的搭建.html"><span><label style="color: #38b6fd"></label>&nbsp;Linux下SVN服务器的搭建</span></a></li>
        
        <li><a href="https://testpoo.github.io/svn命令全解.html"><span><label style="color: #38b6fd"></label>&nbsp;svn命令全解</span></a></li>
        
        <li><a href="https://testpoo.github.io/mysql笔记.html"><span><label style="color: #38b6fd"></label>&nbsp;mysql笔记</span></a></li>
        
        <li><a href="https://testpoo.github.io/python标准异常.html"><span><label style="color: #38b6fd"></label>&nbsp;python标准异常</span></a></li>
        
        <li><a href="https://testpoo.github.io/debian命令apt和dpkg用法.html"><span><label style="color: #38b6fd"></label>&nbsp;debian命令apt和dpkg用法</span></a></li>
        
      </ul>
    </div>
  </body>

  </html>