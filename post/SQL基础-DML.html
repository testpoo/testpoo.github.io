<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="">

    <meta name="keywords" content="Poo&#39;s Notes">
    <meta name="description" content="Poo&#39;s Notes - 一个测试人的自虐。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>地空神一</title>
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/markdown.css" media="all">
    <link rel="stylesheet" type="text/css" href="https://testpoo.github.io/themes/css/style.css" media="all">
    <link rel="icon" type="image/png" href="https://testpoo.github.io/favicon.png">
</head>

<body>
    <div class='nav'>
        <div class='sitename'><a href="/">地空神一</a></div>
        <div class='about'><a href="/about.html">关于</a></div>
    </div>
    <div class='main'>
        
<div class='article'>
    <div class="post-title">
        <h2>SQL基础-DML</h2>
    </div>
    <div class="post-date">
        2020.05.11 20:54 | 类别 :
        
            mysql
        
    </div>
    <div class="post-body">
        <h3 id="sql-dml">SQL 分类-DML</h3>
<p>SQL 语句主要可以划分为以下 3 个类别。</p>
<ul>
<li>
<p>DDL（Data Definition Languages）语句：数据定义语言，这些语句定义了不同的数据段、
数据库、表、列、索引等数据库对象的定义。常用的语句关键字主要包括 create、drop、alter
等。</p>
</li>
<li>
<p>DML（Data Manipulation Language）语句<strong>：</strong>数据操纵语句，用于添加、删除、更新和查
询数据库记录，并检查数据完整性，常用的语句关键字主要包括 insert、delete、udpate 和
select 等。</p>
</li>
<li>
<p>DCL（Data Control Language）语句：数据控制语句，用于控制不同数据段直接的许可和
访问级别的语句。这些语句定义了数据库、表、字段、用户的访问权限和安全级别。主要的
语句关键字包括 grant、revoke 等。</p>
</li>
</ul>
<h3 id="dml">DML语句</h3>
<ul>
<li>插入记录</li>
</ul>
<div class="codehilite"><pre><span></span>  <span class="c1">-- INSERT INTO tablename (field1,field2,……fieldn) VALUES(value1,value2,……valuesn); # 语法</span>
  <span class="o">#</span> <span class="err">指定字段插入</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="k">insert</span> <span class="k">into</span> <span class="n">emp</span> <span class="p">(</span><span class="n">ename</span><span class="p">,</span><span class="n">hiredate</span><span class="p">,</span><span class="n">sal</span><span class="p">,</span><span class="n">deptno</span><span class="p">)</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;zzx1&#39;</span><span class="p">,</span><span class="s1">&#39;2000-01-01&#39;</span><span class="p">,</span><span class="s1">&#39;2000&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="k">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="o">#</span> <span class="err">不指定字段插入</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="k">insert</span> <span class="k">into</span> <span class="n">emp</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;lisa&#39;</span><span class="p">,</span><span class="s1">&#39;2003-02-01&#39;</span><span class="p">,</span><span class="s1">&#39;3000&#39;</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="k">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

  <span class="c1">-- INSERT INTO tablename (field1, field2,……fieldn) VALUES (record1_value1, record1_value2,……record1_valuesn),(record2_value1, record2_value2,……record2_valuesn),……(recordn_value1, recordn_value2,……recordn_valuesn);</span>
  <span class="o">#</span> <span class="err">插入多条数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="k">insert</span> <span class="k">into</span> <span class="n">dept</span> <span class="k">values</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;dept5&#39;</span><span class="p">),(</span><span class="mi">6</span><span class="p">,</span><span class="s1">&#39;dept6&#39;</span><span class="p">);</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">2</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span> <span class="n">sec</span><span class="p">)</span>
  <span class="n">Records</span><span class="p">:</span> <span class="mi">2</span> <span class="n">Duplicates</span><span class="p">:</span> <span class="mi">0</span> <span class="n">Warnings</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>


<ul>
<li>更新记录</li>
</ul>
<div class="codehilite"><pre><span></span>  <span class="o">--</span> <span class="n">UPDATE</span> <span class="n">tablename</span> <span class="n">SET</span> <span class="n">field1</span><span class="o">=</span><span class="n">value1</span><span class="err">，</span><span class="n">field2</span><span class="p">.</span><span class="o">=</span><span class="n">value2</span><span class="err">，……</span><span class="n">fieldn</span><span class="o">=</span><span class="n">valuen</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">CONDITION</span><span class="p">]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 更新单表单数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">update</span> <span class="n">emp</span> <span class="n">set</span> <span class="n">sal</span><span class="o">=</span><span class="mi">4000</span> <span class="n">where</span> <span class="n">ename</span><span class="o">=</span><span class="err">&#39;</span><span class="n">lisa</span><span class="err">&#39;</span><span class="p">;</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="n">Rows</span> <span class="nl">matched</span><span class="p">:</span> <span class="mi">1</span> <span class="nl">Changed</span><span class="p">:</span> <span class="mi">1</span> <span class="nl">Warnings</span><span class="p">:</span> <span class="mi">0</span>

  <span class="o">--</span> <span class="n">UPDATE</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="err">…</span><span class="n">tn</span> <span class="n">set</span> <span class="n">t1</span><span class="p">.</span><span class="n">field1</span><span class="o">=</span><span class="n">expr1</span><span class="p">,</span><span class="n">tn</span><span class="p">.</span><span class="n">fieldn</span><span class="o">=</span><span class="n">exprn</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">CONDITION</span><span class="p">]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 更新多表多数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">update</span> <span class="n">emp</span> <span class="n">a</span><span class="p">,</span><span class="n">dept</span> <span class="n">b</span> <span class="n">set</span> <span class="n">a</span><span class="p">.</span><span class="n">sal</span><span class="o">=</span><span class="n">a</span><span class="p">.</span><span class="n">sal</span><span class="o">*</span><span class="n">b</span><span class="p">.</span><span class="n">deptno</span><span class="p">,</span><span class="n">b</span><span class="p">.</span><span class="n">deptname</span><span class="o">=</span><span class="n">a</span><span class="p">.</span><span class="n">ename</span> <span class="n">where</span> 
  <span class="n">a</span><span class="p">.</span><span class="n">deptno</span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">deptno</span><span class="p">;</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">3</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.04</span> <span class="n">sec</span><span class="p">)</span>
  <span class="n">Rows</span> <span class="nl">matched</span><span class="p">:</span> <span class="mi">5</span> <span class="nl">Changed</span><span class="p">:</span> <span class="mi">3</span> <span class="nl">Warnings</span><span class="p">:</span> <span class="mi">0</span>
</pre></div>


<ul>
<li>删除记录</li>
</ul>
<div class="codehilite"><pre><span></span>  <span class="o">--</span> <span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">tablename</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">CONDITION</span><span class="p">]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 删除单表数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">delete</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">where</span> <span class="n">ename</span><span class="o">=</span><span class="err">&#39;</span><span class="n">dony</span><span class="err">&#39;</span><span class="p">;</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

  <span class="o">--</span> <span class="n">DELETE</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="err">…</span><span class="n">tn</span> <span class="n">FROM</span> <span class="n">t1</span><span class="p">,</span><span class="n">t2</span><span class="err">…</span><span class="n">tn</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">CONDITION</span><span class="p">]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 删除多表数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">delete</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">a</span><span class="p">,</span><span class="n">dept</span> <span class="n">b</span> <span class="n">where</span> <span class="n">a</span><span class="p">.</span><span class="n">deptno</span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">deptno</span> <span class="n">and</span> <span class="n">a</span><span class="p">.</span><span class="n">deptno</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>
  <span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">2</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.04</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<ul>
<li>查询记录</li>
</ul>
<div class="codehilite"><pre><span></span>  <span class="o">--</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">tablename</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">CONDITION</span><span class="p">]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 查询全表数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span>  <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">zzx</span>    <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">lisa</span>   <span class="o">|</span> <span class="mi">2003</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bjguan</span> <span class="o">|</span> <span class="mi">2004</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">02</span> <span class="o">|</span> <span class="mf">5000.00</span> <span class="o">|</span> <span class="mi">3</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">3</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 按字段查询全表数据</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">ename</span><span class="p">,</span><span class="n">hiredate</span><span class="p">,</span><span class="n">sal</span><span class="p">,</span><span class="n">deptno</span> <span class="n">from</span> <span class="n">emp</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span>  <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">zzx</span>    <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">lisa</span>   <span class="o">|</span> <span class="mi">2003</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bjguan</span> <span class="o">|</span> <span class="mi">2004</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">02</span> <span class="o">|</span> <span class="mf">5000.00</span> <span class="o">|</span> <span class="mi">3</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">3</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 查询不重复的记录</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">distinct</span> <span class="n">deptno</span> <span class="n">from</span> <span class="n">emp</span><span class="p">;</span>
  <span class="o">+--------+</span>
  <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+</span>
  <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">+--------+</span>
  <span class="mi">2</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 条件查询</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">where</span> <span class="n">deptno</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span>  <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">zzx</span>    <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bjguan</span> <span class="o">|</span> <span class="mi">2004</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">02</span> <span class="o">|</span> <span class="mf">5000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">2</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 多条件查询</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">where</span> <span class="n">deptno</span><span class="o">=</span><span class="mi">1</span> <span class="n">and</span> <span class="n">sal</span><span class="o">&lt;</span><span class="mi">3000</span><span class="p">;</span>
  <span class="o">+-------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span> <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+-------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">zzx</span>   <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">+-------+------------+---------+--------+</span>
  <span class="mi">1</span> <span class="n">row</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

  <span class="o">--</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">tablename</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">CONDITION</span><span class="p">]</span> <span class="p">[</span><span class="n">ORDER</span> <span class="n">BY</span> <span class="n">field1</span> <span class="p">[</span><span class="n">DESC</span><span class="o">|</span><span class="n">ASC</span><span class="p">]</span> <span class="err">，</span> <span class="n">field2</span> <span class="p">[</span><span class="n">DESC</span><span class="o">|</span><span class="n">ASC</span><span class="p">]</span><span class="err">，……</span><span class="n">fieldn</span> <span class="p">[</span><span class="n">DESC</span><span class="o">|</span><span class="n">ASC</span><span class="p">]]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 排序</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">order</span> <span class="n">by</span> <span class="n">sal</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span>  <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">zzx</span>    <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bzshen</span> <span class="o">|</span> <span class="mi">2005</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">3000.00</span> <span class="o">|</span> <span class="mi">3</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">lisa</span>   <span class="o">|</span> <span class="mi">2003</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bjguan</span> <span class="o">|</span> <span class="mi">2004</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">02</span> <span class="o">|</span> <span class="mf">5000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">4</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">order</span> <span class="n">by</span> <span class="n">deptno</span><span class="p">,</span><span class="n">sal</span> <span class="n">desc</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span>  <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">bjguan</span> <span class="o">|</span> <span class="mi">2004</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">02</span> <span class="o">|</span> <span class="mf">5000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">zzx</span>    <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">lisa</span>   <span class="o">|</span> <span class="mi">2003</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bzshen</span> <span class="o">|</span> <span class="mi">2005</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">3</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">4</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

  <span class="o">--</span> <span class="n">SELECT</span> <span class="err">……</span><span class="p">[</span><span class="n">LIMIT</span> <span class="n">offset_start</span><span class="p">,</span><span class="n">row_count</span><span class="p">]</span> <span class="err">#</span> <span class="err">语法</span>
  <span class="cp"># 限制</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">order</span> <span class="n">by</span> <span class="n">sal</span> <span class="n">limit</span> <span class="mi">3</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span> <span class="o">|</span> <span class="n">hiredate</span> <span class="o">|</span> <span class="n">sal</span> <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">zzx</span>    <span class="o">|</span> <span class="mi">2000</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">2000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">lisa</span>   <span class="o">|</span> <span class="mi">2003</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bzshen</span> <span class="o">|</span> <span class="mi">2005</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">3</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">3</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">order</span> <span class="n">by</span> <span class="n">sal</span> <span class="n">limit</span> <span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">;</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">ename</span>  <span class="o">|</span> <span class="n">hiredate</span>   <span class="o">|</span> <span class="n">sal</span>     <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="o">|</span> <span class="n">lisa</span>   <span class="o">|</span> <span class="mi">2003</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bzshen</span> <span class="o">|</span> <span class="mi">2005</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">01</span> <span class="o">|</span> <span class="mf">4000.00</span> <span class="o">|</span> <span class="mi">3</span>      <span class="o">|</span>
  <span class="o">|</span> <span class="n">bjguan</span> <span class="o">|</span> <span class="mi">2004</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mo">02</span> <span class="o">|</span> <span class="mf">5000.00</span> <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span>
  <span class="o">+--------+------------+---------+--------+</span>
  <span class="mi">3</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<ul>
<li>聚合</li>
</ul>
<div class="codehilite"><pre><span></span>  <span class="o">--</span> <span class="n">SELECT</span> <span class="p">[</span><span class="n">field1</span><span class="p">,</span><span class="n">field2</span><span class="p">,</span><span class="err">……</span><span class="n">fieldn</span><span class="p">]</span> <span class="n">fun_name</span> <span class="n">FROM</span> <span class="n">tablename</span> <span class="p">[</span><span class="n">WHERE</span> <span class="n">where_contition</span><span class="p">]</span> <span class="p">[</span><span class="n">GROUP</span> <span class="n">BY</span> <span class="n">field1</span><span class="p">,</span><span class="n">field2</span><span class="p">,</span><span class="err">……</span><span class="n">fieldn</span> <span class="p">[</span><span class="n">WITH</span> <span class="n">ROLLUP</span><span class="p">]]</span> <span class="p">[</span><span class="n">HAVING</span> <span class="n">where_contition</span><span class="p">]</span>
  <span class="cp"># 统计emp表的总人数：</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">from</span> <span class="n">emp</span><span class="p">;</span> 
  <span class="o">+----------+</span>
  <span class="o">|</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
  <span class="o">+----------+</span>
  <span class="o">|</span> <span class="mi">4</span>        <span class="o">|</span>
  <span class="o">+----------+</span>
  <span class="mi">1</span> <span class="n">row</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 统计各个部门的人数</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">deptno</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">group</span> <span class="n">by</span> <span class="n">deptno</span><span class="p">;</span>
  <span class="o">+--------+----------+</span>
  <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
  <span class="o">+--------+----------+</span>
  <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span> <span class="mi">2</span>        <span class="o">|</span>
  <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span>
  <span class="o">|</span> <span class="mi">4</span>      <span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span>
  <span class="o">+--------+----------+</span>
  <span class="mi">3</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 既要统计各部门人数，又要统计总人数</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">deptno</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">group</span> <span class="n">by</span> <span class="n">deptno</span> <span class="n">with</span> <span class="n">rollup</span><span class="p">;</span>
  <span class="o">+--------+----------+</span>
  <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
  <span class="o">+--------+----------+</span>
  <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span> <span class="mi">2</span>        <span class="o">|</span>
  <span class="o">|</span> <span class="mi">2</span>      <span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span>
  <span class="o">|</span> <span class="mi">4</span>      <span class="o">|</span> <span class="mi">1</span>        <span class="o">|</span>
  <span class="o">|</span> <span class="nb">NULL</span>   <span class="o">|</span> <span class="mi">4</span>        <span class="o">|</span>
  <span class="o">+--------+----------+</span>
  <span class="mi">4</span> <span class="n">rows</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 统计人数大于 1 人的部门</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">deptno</span><span class="p">,</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">from</span> <span class="n">emp</span> <span class="n">group</span> <span class="n">by</span> <span class="n">deptno</span> <span class="n">having</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">;</span>
  <span class="o">+--------+----------+</span>
  <span class="o">|</span> <span class="n">deptno</span> <span class="o">|</span> <span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
  <span class="o">+--------+----------+</span>
  <span class="o">|</span> <span class="mi">1</span>      <span class="o">|</span> <span class="mi">2</span>        <span class="o">|</span>
  <span class="o">+--------+----------+</span>
  <span class="mi">1</span> <span class="n">row</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
  <span class="cp"># 统计公司所有员工的薪水总额、最高和最低薪水</span>
  <span class="n">mysql</span><span class="o">&gt;</span> <span class="n">select</span> <span class="n">sum</span><span class="p">(</span><span class="n">sal</span><span class="p">),</span><span class="n">max</span><span class="p">(</span><span class="n">sal</span><span class="p">),</span><span class="n">min</span><span class="p">(</span><span class="n">sal</span><span class="p">)</span> <span class="n">from</span> <span class="n">emp</span><span class="p">;</span>
  <span class="o">+----------+----------+----------+</span>
  <span class="o">|</span> <span class="n">sum</span><span class="p">(</span><span class="n">sal</span><span class="p">)</span> <span class="o">|</span> <span class="n">max</span><span class="p">(</span><span class="n">sal</span><span class="p">)</span> <span class="o">|</span> <span class="n">min</span><span class="p">(</span><span class="n">sal</span><span class="p">)</span> <span class="o">|</span>
  <span class="o">+----------+----------+----------+</span>
  <span class="o">|</span> <span class="mf">2600.00</span>  <span class="o">|</span> <span class="mf">2000.00</span>  <span class="o">|</span> <span class="mf">100.00</span>   <span class="o">|</span>
  <span class="o">+----------+----------+----------+</span>
  <span class="mi">1</span> <span class="n">row</span> <span class="k">in</span> <span class="n">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>


<ul>
<li>表连接</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">  # 两表链接</span>
<span class="err">  mysql&gt; select ename,deptname from emp,dept where emp.deptno=dept.deptno;</span>
<span class="err">  +--------+----------+</span>
<span class="err">  | ename  | deptname |</span>
<span class="err">  +--------+----------+</span>
<span class="err">  | zzx    | tech     |</span>
<span class="err">  | lisa   | sale     |</span>
<span class="err">  | bjguan | tech     |</span>
<span class="err">  | bzshen | hr       |</span>
<span class="err">  +--------+----------+</span>
<span class="err">  4 rows in set (0.00 sec)</span>
<span class="err">  # 左连</span>
<span class="err">  mysql&gt; select ename,deptname from emp left join dept on emp.deptno=dept.deptno;</span>
<span class="err">  +--------+----------+</span>
<span class="err">  | ename  | deptname |</span>
<span class="err">  +--------+----------+</span>
<span class="err">  | zzx    | tech     |</span>
<span class="err">  | lisa   | sale     |</span>
<span class="err">  | bjguan | tech     |</span>
<span class="err">  | bzshen | hr       |</span>
<span class="err">  | dony   |          |</span>
<span class="err">  +--------+----------+</span>
<span class="err">  5 rows in set (0.00 sec)</span>
<span class="err">  # 右连</span>
<span class="err">  mysql&gt; select ename,deptname from dept right join emp on dept.deptno=emp.deptno;</span>
<span class="err">  +--------+----------+</span>
<span class="err">  | ename  | deptname |</span>
<span class="err">  +--------+----------+</span>
<span class="err">  | zzx    | tech     |</span>
<span class="err">  | lisa   | sale     |</span>
<span class="err">  | bjguan | tech     |</span>
<span class="err">  | bzshen | hr       |</span>
<span class="err">  | dony   |          |</span>
<span class="err">  +--------+----------+</span>
<span class="err">  5 rows in set (0.00 sec)</span>
</pre></div>


<ul>
<li>子查询</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">  # 多记录查询</span>
<span class="err">  mysql&gt; select * from emp where deptno in(select deptno from dept);</span>
<span class="err">  +--------+------------+---------+--------+</span>
<span class="err">  | ename | hiredate | sal | deptno |</span>
<span class="err">  +--------+------------+---------+--------+</span>
<span class="err">  | zzx | 2000-01-01 | 2000.00 | 1 |</span>
<span class="err">  | lisa | 2003-02-01 | 4000.00 | 2 |</span>
<span class="err">  | bjguan | 2004-04-02 | 5000.00 | 1 |</span>
<span class="err">  | bzshen | 2005-04-01 | 4000.00 | 3 |</span>
<span class="err">  +--------+------------+---------+--------+</span>
<span class="err">  4 rows in set (0.00 sec)</span>
<span class="err">  # 单记录可用=</span>
<span class="err">  ysql&gt; select * from emp where deptno = (select deptno from dept);</span>
<span class="err">  ERROR 1242 (21000): Subquery returns more than 1 row</span>
<span class="err">  mysql&gt; select * from emp where deptno = (select deptno from dept limit 1);</span>
<span class="err">  +--------+------------+---------+--------+</span>
<span class="err">  | ename | hiredate | sal | deptno |</span>
<span class="err">  +--------+------------+---------+--------+</span>
<span class="err">  | zzx | 2000-01-01 | 2000.00 | 1 |</span>
<span class="err">  | bjguan | 2004-04-02 | 5000.00 | 1 |</span>
<span class="err">  +--------+------------+---------+--------+</span>
<span class="err">  2 rows in set (0.00 sec)</span>
</pre></div>


<ul>
<li>记录联合</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">  -- SELECT * FROM t1 UNION|UNION ALL SELECT * FROM t2 …… UNION|UNION ALL SELECT * FROM tn; # 语法</span>
<span class="err">  # 联合</span>
<span class="err">  mysql&gt; select deptno from emp </span>
<span class="err">   -&gt; union all</span>
<span class="err">   -&gt; select deptno from dept;</span>
<span class="err">  +--------+</span>
<span class="err">  | deptno |</span>
<span class="err">  +--------+</span>
<span class="err">  | 1      |</span>
<span class="err">  | 2      |</span>
<span class="err">  | 1      |</span>
<span class="err">  | 4      |</span>
<span class="err">  | 1      |</span>
<span class="err">  | 2      |</span>
<span class="err">  | 5      |</span>
<span class="err">  +--------+</span>
<span class="err">  7 rows in set (0.00 sec)</span>
<span class="err">  # 联合去重显示</span>
<span class="err">  mysql&gt; select deptno from emp </span>
<span class="err">   -&gt; union</span>
<span class="err">   -&gt; select deptno from dept;</span>
<span class="err">  +--------+</span>
<span class="err">  | deptno |</span>
<span class="err">  +--------+</span>
<span class="err">  | 1      |</span>
<span class="err">  | 2      |</span>
<span class="err">  | 4      |</span>
<span class="err">  | 5      |</span>
<span class="err">  +--------+</span>
<span class="err">  4 rows in set (0.00 sec)</span>
</pre></div>
    </div>
</div>
<div class="post-meta">
    
    <span class="post-meta-item-text">标签 :
    
        dml
    
    </span>
    
</div>
<div class="prenex">
    <div class="previous">
        
        <a href="https://testpoo.github.io/post/SQL基础-DCL和帮助.html">SQL基础-DCL和帮助</a>
        
    </div>
    <div class="nexts">
        
        <a href="https://testpoo.github.io/post/SQL基础-DDL.html">SQL基础-DDL</a>
        
    </div>
</div>

    </div>
    <div class='footer'>
        <span class="save">授权协议 <a href='https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh'>(CC) BY-NC-SA</a> <span class="del">|</span><span class="save"> 订阅 <a href="/rss.xml">RSS</a> <span class="del">|</span><span class="save"> 微信 : puyaweis</span>
    </div>
</body>

</html>